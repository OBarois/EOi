(this.webpackJsonpeoi=this.webpackJsonpeoi||[]).push([[0],{120:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(106),i=a.n(o),s=(a(120),a(5)),c=a(7),l=(a(135),a(6)),u=(a(136),a(43)),g=a.n(u),h=a(107),d=a(24),f=a(4),m=a.n(f),b=a(10),j=a(14),p=a(12),v=a(11),O=m.a.Angle,S=m.a.ArgumentError,E=m.a.Logger,_={getAsGeographicLocation:function(e){if(e instanceof Date===!1)throw new S(E.logMessage(E.LEVEL_SEVERE,"SunPosition","getAsGeographicLocation","missingDate"));var t=this.getAsCelestialLocation(e);return this.celestialToGeographic(t,e)},getAsCelestialLocation:function(e){if(e instanceof Date===!1)throw new S(E.logMessage(E.LEVEL_SEVERE,"SunPosition","getAsCelestialLocation","missingDate"));var t=this.computeJulianDate(e)-2451545,a=this.normalizeAngle360(280.46+.9856474*t),n=this.normalizeAngle360(357.528+.9856003*t)*O.DEGREES_TO_RADIANS,r=a+1.915*Math.sin(n)+.02*Math.sin(2*n),o=r*O.DEGREES_TO_RADIANS,i=(23.439-4e-7*t)*O.DEGREES_TO_RADIANS,s=Math.asin(Math.sin(i)*Math.sin(o))*O.RADIANS_TO_DEGREES,c=Math.atan(Math.cos(i)*Math.tan(o))*O.RADIANS_TO_DEGREES;return r>=90&&r<270&&(c+=180),{declination:s,rightAscension:c=this.normalizeAngle360(c)}},celestialToGeographic:function(e,t){if(!e)throw new S(E.logMessage(E.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingCelestialLocation"));if(t instanceof Date===!1)throw new S(E.logMessage(E.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingDate"));var a=this.computeJulianDate(t)-2451545,n=this.normalizeAngle360(280.46061837+360.98564736629*a),r=this.normalizeAngle360(n-e.rightAscension),o=O.normalizedDegreesLongitude(-r);return{latitude:e.declination,longitude:o}},computeJulianDate:function(e){if(e instanceof Date===!1)throw new S(E.logMessage(E.LEVEL_SEVERE,"SunPosition","computeJulianDate","missingDate"));var t=e.getUTCFullYear(),a=e.getUTCMonth()+1,n=e.getUTCDate(),r=(e.getUTCHours()+e.getUTCMinutes()/60+e.getUTCSeconds()/3600)/24;a<=2&&(t-=1,a+=12);var o=Math.trunc(t/100),i=2-o+Math.trunc(o/4);return Math.trunc(365.25*(t+4716))+Math.trunc(30.6001*(a+1))+n+i-1524.5+r},normalizeAngle360:function(e){var t=e%360;return t>=0?t:t<0?360+t:360-t}},M=m.a.Angle,y={SUN:0,MERCURY:1,VENUS:2,MARS:4,JUPITER:5,SATURN:6,URANUS:7,NEPTUNE:8,getCelestialLocation:function(e,t){var a,n=_.computeJulianDate(t)-2451543.5;switch(e){case this.SUN:a=this.computeSun(n);break;case this.MERCURY:a=this.computeMercury(n);break;case this.VENUS:a=this.computeVenus(n);break;case this.MARS:a=this.computeMars(n);break;case this.JUPITER:a=this.computeJupiter(n);break;case this.SATURN:a=this.computeSaturn(n);break;case this.URANUS:a=this.computeUranus(n);break;case this.NEPTUNE:a=this.computeNeptune(n)}return this.computePosition(n,a)},computeMercury:function(e){return{N:48.3313+324587e-10*e,i:7.0047+5e-8*e,w:29.1241+101444e-10*e,a:.387098,e:.205635+5.59e-10*e,M:168.6562+4.0923344368*e}},computeVenus:function(e){return{N:76.6799+24659e-9*e,i:3.3946+2.75e-8*e,w:54.891+138374e-10*e,a:.72333,e:.006773-1.302e-9*e,M:48.0052+1.6021302244*e}},computeMars:function(e){return{N:49.5574+211081e-10*e,i:1.8497-1.78e-8*e,w:286.5016+292961e-10*e,a:1.523688,e:.093405+2.516e-9*e,M:18.6021+.5240207766*e}},computeJupiter:function(e){return{N:100.4542+276854e-10*e,i:1.303-1.557e-7*e,w:273.8777+164505e-10*e,a:5.20256,e:.048498+4.469e-9*e,M:19.895+.0830853001*e}},computeSaturn:function(e){return{N:113.6634+23898e-9*e,i:2.4886-1.081e-7*e,w:339.3939+297661e-10*e,a:9.55475,e:.055546-9.499e-9*e,M:316.967+.0334442282*e}},computeUranus:function(e){return{N:74.0005+13978e-9*e,i:.7733+19e-9*e,w:96.6612+30565e-9*e,a:19.18171-1.55e-8*e,e:.047318+7.45e-9*e,M:142.5905+.011725806*e}},computeNeptune:function(e){return{N:131.7806+30173e-9*e,i:1.77-255e-9*e,w:272.8461-6027e-9*e,a:30.05826+3.313e-8*e,e:.008606+2.15e-9*e,M:260.2471+.005995147*e}},computeSun:function(e){return{N:0,i:0,w:282.9404+470935e-10*e,a:1,e:.016709-1.151e-9*e,M:356.047+.9856002585*e}},computePosition:function(e,t){var a=t.N,n=t.i,r=t.w,o=t.a,i=t.e,s=t.M;a=_.normalizeAngle360(a)*M.DEGREES_TO_RADIANS,n=_.normalizeAngle360(n)*M.DEGREES_TO_RADIANS,r=_.normalizeAngle360(r)*M.DEGREES_TO_RADIANS;var c=(s=_.normalizeAngle360(s)*M.DEGREES_TO_RADIANS)+i*Math.sin(s)*(1+i*Math.cos(s));if(i>=.06)for(var l=0;l<10;l++){var u=c-(c-i*Math.sin(c)-s)/(1-i*Math.cos(c));if(Math.abs(u-c)<.001){c=u;break}c=u}var g=o*(Math.cos(c)-i),h=o*(Math.sqrt(1-i*i)*Math.sin(c)),d=Math.atan2(h,g),f=Math.sqrt(g*g+h*h),m=f*(Math.cos(a)*Math.cos(d+r)-Math.sin(a)*Math.sin(d+r)*Math.cos(n)),b=f*(Math.sin(a)*Math.cos(d+r)+Math.cos(a)*Math.sin(d+r)*Math.cos(n)),j=f*(Math.sin(d+r)*Math.sin(n)),p=382394e-10*(0-e)*M.DEGREES_TO_RADIANS,v=Math.atan2(b,m)+p,O=Math.atan2(j,Math.sqrt(m*m+b*b));m=f*Math.cos(v)*Math.cos(O),b=f*Math.sin(v)*Math.cos(O),j=f*Math.sin(O);var S=this.getLonSun(e,this.computeSun(e)),E=S.lonsun,y=S.rsun;E*=M.RADIANS_TO_DEGREES,E=_.normalizeAngle360(E)*M.DEGREES_TO_RADIANS;var w=m+y*Math.cos(E),R=b+y*Math.sin(E),A=j,C=_.normalizeAngle360(23.4393-3.563e-7*e)*M.DEGREES_TO_RADIANS,D=w,x=R*Math.cos(C)-A*Math.sin(C),T=R*Math.sin(C)+A*Math.cos(C);return{ra:_.normalizeAngle360(Math.atan2(x,D)*M.RADIANS_TO_DEGREES),dec:Math.atan2(T,Math.sqrt(D*D+x*x))*M.RADIANS_TO_DEGREES}},getLonSun:function(e,t){var a=t.w,n=t.e,r=t.M;a=_.normalizeAngle360(a)*M.DEGREES_TO_RADIANS;var o=(r=_.normalizeAngle360(r)*M.DEGREES_TO_RADIANS)+n*Math.sin(r)*(1+n*Math.cos(r)),i=Math.cos(o)-n,s=Math.sqrt(1-n*n)*Math.sin(o);return{lonsun:Math.atan2(s,i)+a,rsun:Math.sqrt(i*i+s*s)}}},w=m.a.ArgumentError,R=m.a.GpuProgram,A=m.a.Logger,C=m.a.Matrix,D=m.a.Color,x=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e,"attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nuniform float numDays;\nuniform vec2 magnitudeRange;\nvarying float magnitudeWeight;\nfloat normalizeAngle(float angle) {\n   float angleDivisions = angle / 360.0;\n   return 360.0 * (angleDivisions - floor(angleDivisions));\n}\nvec3 computePosition(float dec, float ra) {\n   float GMST = normalizeAngle(280.46061837 + 360.98564736629 * numDays);\n   float GHA = normalizeAngle(GMST - ra);\n   float lon = -GHA + 360.0 * step(180.0, GHA);\n   float latRad = radians(dec);\n   float lonRad = radians(lon);\n   float radCosLat = cos(latRad);\n   return vec3(radCosLat * sin(lonRad), sin(latRad), radCosLat * cos(lonRad));\n}\nfloat normalizeScalar(float value, float minValue, float maxValue){\n   return (value - minValue) / (maxValue - minValue);\n}\nvoid main() {\n   vec3 vertexPosition = computePosition(vertexPoint.x, vertexPoint.y);\n   gl_Position = mvpMatrix * vec4(vertexPosition.xyz, 1.0);\n   gl_Position.z = gl_Position.w - 0.00001;\n   gl_PointSize = vertexPoint.z;\n   magnitudeWeight = normalizeScalar(vertexPoint.w, magnitudeRange.x, magnitudeRange.y);\n}","precision mediump float;\nuniform sampler2D textureSampler;\nuniform int fragMode;\nuniform vec4 color;\nvarying float magnitudeWeight;\nconst vec4 white = vec4(1.0, 1.0, 1.0, 1.0);\nconst vec4 grey = vec4(0.5, 0.5, 0.5, 1.0);\nvoid main() {\n   if (fragMode == 1) {\n       gl_FragColor = texture2D(textureSampler, gl_PointCoord);\n   }\n   else if (fragMode == 0) {\n       gl_FragColor = mix(white, grey, magnitudeWeight);\n   }\n   else if (fragMode == 2) {\n       gl_FragColor = color;\n   }\n}",["vertexPoint"])).FRAG_MODE_MIX_COLOR=0,n.FRAG_MODE_TEXTURE=1,n.FRAG_MODE_COLOR=2,n.vertexPointLocation=n.attributeLocation(e,"vertexPoint"),n.mvpMatrixLocation=n.uniformLocation(e,"mvpMatrix"),n.numDaysLocation=n.uniformLocation(e,"numDays"),n.magnitudeRangeLocation=n.uniformLocation(e,"magnitudeRange"),n.textureUnitLocation=n.uniformLocation(e,"textureSampler"),n.fragModeLocation=n.uniformLocation(e,"fragMode"),n.colorLocation=n.uniformLocation(e,"color"),n.localState={mvpMatrix:null,numDays:null,magnitudeRange:null,textureUnit:null,fragMode:null,color:null},n}return Object(j.a)(a,[{key:"loadModelviewProjection",value:function(e,t){if(!t)throw new w(A.logMessage(A.LEVEL_SEVERE,"StarFieldProgram","loadModelviewProjection","missingMatrix"));var a=!1;null===this.localState.mvpMatrix&&(a=!0,this.localState.mvpMatrix=C.fromIdentity()),!a&&this.localState.mvpMatrix.equals(t)||(this.loadUniformMatrix(e,t,this.mvpMatrixLocation),this.localState.mvpMatrix.copy(t))}},{key:"loadNumDays",value:function(e,t){if(null==t)throw new w(A.logMessage(A.LEVEL_SEVERE,"StarFieldProgram","loadNumDays","missingNumDays"));this.localState.numDays!==t&&(e.uniform1f(this.numDaysLocation,t),this.localState.numDays=t)}},{key:"loadMagnitudeRange",value:function(e,t,a){if(null==t)throw new w(A.logMessage(A.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMinMag"));if(null==a)throw new w(A.logMessage(A.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMaxMag"));var n=!1;null===this.localState.magnitudeRange&&(n=!0,this.localState.magnitudeRange=[t,a]),(n||this.localState.magnitudeRange[0]!==t||this.localState.magnitudeRange[1]!==a)&&(e.uniform2f(this.magnitudeRangeLocation,t,a),this.localState.magnitudeRange[0]=t,this.localState.magnitudeRange[1]=a)}},{key:"loadTextureUnit",value:function(e,t){this.localState.textureUnit!==t&&(e.uniform1i(this.textureUnitLocation,t-e.TEXTURE0),this.localState.textureUnit=t)}},{key:"loadFragMode",value:function(e,t){this.localState.fragMode!==t&&(e.uniform1i(this.fragModeLocation,t),this.localState.fragMode=t)}},{key:"loadColor",value:function(e,t){var a=!1;null===this.localState.color&&(a=!0,this.localState.color=new D(0,0,0,0)),!a&&this.localState.color.equals(t)||(this.loadUniformColor(e,t,this.colorLocation),this.localState.color.copy(t))}}]),a}(R);x.key="WorldWindGpuStarFieldFullProgram";var T=x,L=(m.a.Color,m.a.Layer),N=m.a.Logger,P=m.a.Matrix,k=m.a.REDRAW_EVENT_TYPE,F=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(b.a)(this,a),(n=t.call(this,"StarField")).pickEnabled=!1,n.sunSize=128,n.showSun=!0,n._starDataSource=e||m.a.configuration.baseUrl+"data/stars.json",n._sunImageSource=m.a.configuration.baseUrl+"images/sunTexture.png",n._matrix=P.fromIdentity(),n._starsPositionsVboCacheKey=null,n._numStars=0,n._starData=null,n._minMagnitude=Number.MAX_VALUE,n._maxMagnitude=Number.MIN_VALUE,n._loadStarted=!1,n._minScale=3e7,n._scale=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,n._sunPositionsCacheKey="",n._sunBufferView=new Float32Array(4),n._MAX_GL_POINT_SIZE=0,n.showPlanets=!0;var r=32;return n.planets=[{id:y.MERCURY,url:"images/Mercury64.png",size:8,ra:null,dec:null},{id:y.VENUS,url:"images/Venus64.png",size:8,ra:null,dec:null},{id:y.MARS,url:"images/Mars64.png",size:8,ra:null,dec:null},{id:y.JUPITER,url:"images/Jupiter64.png",size:r,ra:null,dec:null},{id:y.SATURN,url:"images/Saturn64.png",size:r,ra:null,dec:null},{id:y.URANUS,url:"images/Uranus64.png",size:16,ra:null,dec:null},{id:y.NEPTUNE,url:"images/Neptune64.png",size:16,ra:null,dec:null}],n._planetsBufferView=null,n._cacheKeys={sunPosition:"",planetPositions:"",starPositions:""},n}return Object(j.a)(a,[{key:"starDataSource",get:function(){return this._starDataSource},set:function(e){this._starDataSource=e,this.invalidateStarData()}},{key:"sunImageSource",get:function(){return this._sunImageSource},set:function(e){this._sunImageSource=e}},{key:"doRender",value:function(e){if(!e.globe.is2D())if(this.haveResources(e)){this.beginRendering(e);try{this.doDraw(e)}finally{this.endRendering(e)}}else this.loadResources(e)}},{key:"haveResources",value:function(e){var t=e.gpuResourceCache.resourceForKey(this._sunImageSource),a=this.planets.every((function(t){return!!e.gpuResourceCache.resourceForKey(t.url)}));return null!=this._starData&&null!=t&&a}},{key:"loadResources",value:function(e){var t=e.currentGlContext,a=e.gpuResourceCache;this._starData||this.fetchStarData(),a.resourceForKey(this._sunImageSource)||a.retrieveTexture(t,this._sunImageSource),this.planets.forEach((function(e){a.resourceForKey(e.url)||a.retrieveTexture(t,e.url)}))}},{key:"beginRendering",value:function(e){var t=e.currentGlContext;e.findAndBindProgram(T),t.enableVertexAttribArray(0),t.depthMask(!1)}},{key:"doDraw",value:function(e){this.loadCommonUniforms(e),this.renderStars(e),this.showSun&&this.renderSun(e),this.showPlanets&&this.renderPlanets(e)}},{key:"loadCommonUniforms",value:function(e){var t=e.currentGlContext,a=e.currentProgram,n=e.modelviewProjection||e.navigatorState.modelviewProjection;this._matrix.copy(n),this._matrix.multiplyByScale(this._scale,this._scale,this._scale),a.loadModelviewProjection(t,this._matrix);var r=_.computeJulianDate(this.time||new Date);a.loadNumDays(t,r-2451545)}},{key:"renderStars",value:function(e){var t=e.currentGlContext,a=e.gpuResourceCache,n=e.currentProgram;this._starsPositionsVboCacheKey||(this._starsPositionsVboCacheKey=a.generateCacheKey());var r=a.resourceForKey(this._starsPositionsVboCacheKey);if(r)t.bindBuffer(t.ARRAY_BUFFER,r);else{r=t.createBuffer();var o=this.createStarsGeometry();a.putResource(this._starsPositionsVboCacheKey,r,4*o.length),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW)}e.frameStatistics.incrementVboLoadCount(1),t.vertexAttribPointer(0,4,t.FLOAT,!1,0,0),n.loadMagnitudeRange(t,this._minMagnitude,this._maxMagnitude),n.loadFragMode(t,n.FRAG_MODE_MIX_COLOR),t.drawArrays(t.POINTS,0,this._numStars)}},{key:"renderPlanets",value:function(e){var t=this,a=e.currentGlContext,n=e.currentProgram,r=e.gpuResourceCache;this._MAX_GL_POINT_SIZE||(this._MAX_GL_POINT_SIZE=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]),this.sunSize>this._MAX_GL_POINT_SIZE&&N.log(N.LEVEL_WARNING,"StarFieldLayer - sunSize is to big, max size allowed is: "+this._MAX_GL_POINT_SIZE),this.planets.forEach((function(e){var a=y.getCelestialLocation(e.id,t.time||new Date),n=a.ra,r=a.dec;e.ra=n,e.dec=r}),this),this._planetsBufferView||(this._planetsBufferView=new Float32Array(4*this.planets.length));for(var o=0;o<this.planets.length;o++){var i=this.planets[o];this._planetsBufferView[4*o+0]=i.dec,this._planetsBufferView[4*o+1]=i.ra,this._planetsBufferView[4*o+2]=Math.min(i.size,this._MAX_GL_POINT_SIZE),this._planetsBufferView[4*o+3]=1}this._planetsPositionsVboCacheKey||(this._planetsPositionsVboCacheKey=r.generateCacheKey());var s=r.resourceForKey(this._planetsPositionsVboCacheKey);s?(a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferSubData(a.ARRAY_BUFFER,0,this._planetsBufferView)):(s=a.createBuffer(),r.putResource(this._planetsPositionsVboCacheKey,s,4*this._planetsBufferView.length),a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,this._planetsBufferView,a.DYNAMIC_DRAW)),e.frameStatistics.incrementVboLoadCount(1),a.vertexAttribPointer(0,4,a.FLOAT,!1,0,0),n.loadFragMode(a,n.FRAG_MODE_TEXTURE);for(var c=0;c<this.planets.length;c++){var l=this.planets[c].url;e.gpuResourceCache.resourceForKey(l).bind(e),a.drawArrays(a.POINTS,c,1)}}},{key:"renderSun",value:function(e){var t=e.currentGlContext,a=e.currentProgram,n=e.gpuResourceCache;this._MAX_GL_POINT_SIZE||(this._MAX_GL_POINT_SIZE=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[1]),this.sunSize>this._MAX_GL_POINT_SIZE&&N.log(N.LEVEL_WARNING,"StarFieldLayer - sunSize is to big, max size allowed is: "+this._MAX_GL_POINT_SIZE);var r=_.getAsCelestialLocation(this.time||new Date);this._sunBufferView[0]=r.declination,this._sunBufferView[1]=r.rightAscension,this._sunBufferView[2]=Math.min(this.sunSize,this._MAX_GL_POINT_SIZE),this._sunBufferView[3]=1,this._sunPositionsCacheKey||(this._sunPositionsCacheKey=n.generateCacheKey());var o=n.resourceForKey(this._sunPositionsCacheKey);o?(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferSubData(t.ARRAY_BUFFER,0,this._sunBufferView)):(o=t.createBuffer(),n.putResource(this._sunPositionsCacheKey,o,4*this._sunBufferView.length),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,this._sunBufferView,t.DYNAMIC_DRAW)),e.frameStatistics.incrementVboLoadCount(1),t.vertexAttribPointer(0,4,t.FLOAT,!1,0,0),a.loadFragMode(t,a.FRAG_MODE_TEXTURE),e.gpuResourceCache.resourceForKey(this._sunImageSource).bind(e),t.drawArrays(t.POINTS,0,1)}},{key:"endRendering",value:function(e){var t=e.currentGlContext;t.depthMask(!0),t.disableVertexAttribArray(0)}},{key:"fetchStarData",value:function(){if(!this._loadStarted){this._loadStarted=!0;var e=this,t=new XMLHttpRequest;t.onload=function(){if(this.status>=200&&this.status<300)try{e._starData=JSON.parse(this.response),e.sendRedrawRequest()}catch(t){N.log(N.LEVEL_SEVERE,"StarFieldLayer unable to parse JSON for star data "+t.toString())}else N.log(N.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data. Status: "+this.status+" "+this.statusText);e._loadStarted=!1},t.onerror=function(){N.log(N.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data"),e._loadStarted=!1},t.ontimeout=function(){N.log(N.LEVEL_SEVERE,"StarFieldLayer fetch star data has timeout"),e._loadStarted=!1},t.open("GET",this._starDataSource,!0),t.send()}}},{key:"createStarsGeometry",value:function(){var e=this.parseStarsMetadata(this._starData.metadata);if(-1===e.raIndex)throw new Error(N.logMessage(N.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing ra field in star data."));if(-1===e.decIndex)throw new Error(N.logMessage(N.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing dec field in star data."));if(-1===e.magIndex)throw new Error(N.logMessage(N.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing vmag field in star data."));var t=this._starData.data,a=[];this._minMagnitude=Number.MAX_VALUE,this._maxMagnitude=Number.MIN_VALUE;for(var n=0,r=t.length;n<r;n++){var o=t[n],i=o[e.decIndex],s=o[e.raIndex],c=o[e.magIndex],l=c<2?2:1;a.push(i,s,l,c),this._minMagnitude=Math.min(this._minMagnitude,c),this._maxMagnitude=Math.max(this._maxMagnitude,c)}return this._numStars=Math.floor(a.length/4),a}},{key:"parseStarsMetadata",value:function(e){for(var t=-1,a=-1,n=-1,r=0,o=e.length;r<o;r++){var i=e[r];"ra"===i.name&&(t=r),"dec"===i.name&&(a=r),"vmag"===i.name&&(n=r)}return{raIndex:t,decIndex:a,magIndex:n}}},{key:"invalidateStarData",value:function(){this._starData=null,this._starsPositionsVboCacheKey=null}},{key:"sendRedrawRequest",value:function(){var e=document.createEvent("Event");e.initEvent(k,!0,!0),window.dispatchEvent(e)}}]),a}(L),I=a(44),V=a.n(I),U=m.a.Position,G=new(0,m.a.RenderableLayer)("Model");fetch("./data/sentinel1/s1.json").then((function(e){return e.json()})).then((function(e){G.addRenderable(new V.a.Model(e,{rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0},new U(51,14,1e5)))}));var B=G,z=[{service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.esa.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018 esa",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.esa.maps.eox.at/wms",layerNames:"osm",title:"osm",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.esa.maps.eox.at/wms",layerNames:"terrain-light",title:"terrain-light",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.maps.eox.at/wms",layerNames:"terrain",title:"terrain",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)}],W=[{service:"https://tiles.maps.eox.at/wms",layerNames:"hydrography",title:"hydrography",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",title:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)}];function H(e){var t=e.id,a=e.clon,r=e.clat,o=e.alt,i=e.starfield,c=e.atmosphere,u=e.background,f=e.overlay,b=e.names,j=e.satellites,p=e.dem,v=Object(n.useRef)(null),O=Object(n.useState)("3D"),S=Object(s.a)(O,2),E=(S[0],S[1]),_=Object(n.useState)(""),M=Object(s.a)(_,2),y=(M[0],M[1],Object(n.useState)([])),w=Object(s.a)(y,2),R=w[0],A=w[1],C=Object(n.useState)([]),D=Object(s.a)(C,2),x=(D[0],D[1],Object(n.useState)({latitude:r,longitude:a,altitude:o,aoi:"",pickedItems:[]})),T=Object(s.a)(x,2),L=T[0],N=T[1],P=Object(n.useRef)(p),k=Object(n.useRef)(0),I=Object(n.useRef)(0);Object(n.useRef)(0),Object(n.useRef)(0);function V(){var e=v.current,t=e.navigator.heading/-20;setTimeout((function a(){Math.abs(e.navigator.heading)>Math.abs(t)?(e.navigator.heading+=t,setTimeout(a,10)):e.navigator.heading=0,e.redraw()}),10)}function U(e){console.log("toggleAtmosphere: "+e),X("Atmosphere").enabled=null!=e?e:!X("Atmosphere").enabled,v.current.redraw()}function G(e){console.log("toggleModel: "+e),X("Model").enabled=null!=e?e:!X("Model").enabled,v.current.redraw()}function H(e){console.log("toggleStarfield: "+e),X("StarField").enabled=null!=e?e:!X("StarField").enabled,v.current.redraw()}function K(e){console.log("toggleNames: "+e),X("overlay_bright").enabled=null!=e?e:!X("overlay_bright").enabled,v.current.redraw()}function Y(e){v.current.layers[k.current].enabled=!1,k.current=null===e?k.current+1:(e-1)%z.length,console.log("Background Layer ["+(k.current+1)+"/"+z.length+"]: "+v.current.layers[k.current].displayName),v.current.layers[k.current].enabled=!0,v.current.redraw()}function q(e){console.log(e),v.current.layers[I.current+z.length].enabled=!1,I.current=null===e?I.current+1:(e-1)%W.length,console.log(I.current),v.current.layers[I.current+z.length].enabled=!0,v.current.redraw()}function J(e){var t;console.log("Copernicus Dem: "+e),P.current?(console.log("Switching to NASA Dem"),t=new m.a.EarthElevationModel):(console.log("Switching to Copernicus Dem"),(t=new m.a.ElevationModel).addCoverage(new m.a.TiledElevationCoverage({coverageSector:m.a.Sector.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"image/tiff",minElevation:-11e3,maxElevation:8850,urlBuilder:new m.a.WcsTileUrlBuilder("https://dem.esa.maps.eox.at/elevation","copdem","2.0.1")}))),v.current.globe.elevationModel=t,v.current.redraw(),P.current=!P.current}function X(e){for(var t=0;t<v.current.layers.length;t++)if(v.current.layers[t].displayName===e)return v.current.layers[t];return null}function Z(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(h.a)(g.a.mark((function e(t){var a,n,r,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(108e5,a=0;a<v.current.layers.length;a++){if(v.current.layers[a].displayName.includes("Products:"))for(n=0;n<v.current.layers[a].renderables.length;n++)r=v.current.layers[a].renderables[n],0!=t?(o=new Date(r.userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStartTime).getTime(),i=new Date(r.userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStopTime).getTime(),r.enabled=o<=t+54e5&&i>=t-54e5):r.enabled=!1;v.current.layers[a].displayName}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,a){setTimeout((function(){v.current.goToAnimator.travelTime=1e3,v.current.goTo(new m.a.Position(e,t,a)),v.current.redraw()}),2e3)}var ee=function(){var e=v.current.navigator.lookAtLocation.longitude,t=v.current.navigator.lookAtLocation.latitude,a=v.current.navigator.range,n=a<2e6?function(){var e,t,a=v.current.viewport,n="";try{(e=v.current.pickTerrain(v.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=v.current.pickTerrain(v.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}():"";N((function(r){return Object(l.a)(Object(l.a)({},r),{},{longitude:e,latitude:t,altitude:a,viewpolygon:n})}))},te=function(e){console.log("double click"),V()};return Object(n.useEffect)((function(){console.log("Creating the world...");var e=new m.a.ElevationModel;e.removeAllCoverages(),e.addCoverage(new m.a.TiledElevationCoverage({coverageSector:m.a.Sector.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"image/tiff",minElevation:-11e3,maxElevation:8850,urlBuilder:new m.a.WcsTileUrlBuilder("https://dem.esa.maps.eox.at/elevation","copdem","2.0.1")})),v.current=new m.a.WorldWindow(t),v.current.redrawCallbacks.push(ee),m.a.BasicWorldWindowController.prototype.applyLimits=function(){v.current.navigator.range=m.a.WWMath.clamp(v.current.navigator.range,2e3,3e8)};var n=new m.a.ClickRecognizer(v.current,te);n.numberOfClicks=2,n.maxClickInterval=200,v.current.worldWindowController.clickDownRecognizer.recognizeSimultaneouslyWith(n);var s=new m.a.TapRecognizer(v.current,te);s.numberOfTaps=2,s.name="double tap",v.current.worldWindowController.tapDownRecognizer.recognizeSimultaneouslyWith(s),m.a.configuration.baseUrl=window.location.href;for(var l=new F,u=new m.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),g=new m.a.RenderableLayer("Quicklooks"),h=[{layer:l,enabled:i},{layer:u,enabled:c},{layer:g,enabled:!0},{layer:B,enabled:j}],d=0;d<z.length;d++){var f=new m.a.WmsLayer(z[d],"");f.enabled=!1,v.current.addLayer(f,"")}for(var b=0;b<W.length;b++){var p=new m.a.WmsLayer(W[b],"");p.enabled=!1,v.current.addLayer(p,"")}for(var O=0;O<h.length;O++)h[O].layer.enabled=h[O].enabled,v.current.addLayer(h[O].layer);console.log(v.current.layers),l.time=new Date,u.time=new Date,$(r,a,o),v.current.redraw(),v.current.deepPicking=!0}),[]),Object(n.useEffect)((function(){Y(u)}),[u]),Object(n.useEffect)((function(){q(f)}),[f]),Object(n.useEffect)((function(){K(b)}),[b]),Object(n.useEffect)((function(){U(c)}),[c]),Object(n.useEffect)((function(){H(i)}),[i]),Object(n.useEffect)((function(){G(j)}),[j]),Object(n.useEffect)((function(){J(p)}),[p]),{ewwstate:L,moveTo:$,removeGeojson:function(){for(var e=0;e<R.length;e++)v.current.removeLayer(R[e]);A((function(e){return[]})),v.current.redraw()},addGeojson:function(e,t){var a=new m.a.RenderableLayer("Products: "+e.properties.updated+Math.ceil(1e4*Math.random()));v.current.addLayer(a),new m.a.GeoJSONParser(e).load((function(){console.log(a),A((function(e){return[].concat(Object(d.a)(e),[a])})),Z(t),v.current.redraw()}),(function(e,t){var a={};a.userProperties=t;var n=new m.a.PlacemarkAttributes(null);return n.imageScale=10,n.imageColor=new m.a.Color(0,1,1,.2),n.labelAttributes.offset=new m.a.Offset(m.a.OFFSET_FRACTION,5,m.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new m.a.PlacemarkAttributes(n):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new m.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new m.a.ShapeAttributes(null),a.attributes.interiorColor=new m.a.Color(1,0,0,.2),a.attributes.outlineColor=new m.a.Color(1,0,0,.3),a.highlightAttributes=new m.a.ShapeAttributes(a.attributes),a.highlightAttributes.outlineColor=new m.a.Color(1,0,0,.4),a.highlightAttributes.interiorColor=new m.a.Color(1,0,0,0)),a}),a)},addWMS:function(){},toggleStarfield:H,toggleAtmosphere:U,setTime:function(e){X("StarField").time=X("Atmosphere").time=new Date(e),Z(e),v.current.redraw()},toggleProjection:function(){E((function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":v.current.globe.projection=new m.a.ProjectionWgs84;break;case"Equirectangular":v.current.globe.projection=new m.a.ProjectionEquirectangular;break;case"Mercator":v.current.globe.projection=new m.a.ProjectionMercator;break;case"North Polar":v.current.globe.projection=new m.a.ProjectionPolarEquidistant("North");break;case"South Polar":v.current.globe.projection=new m.a.ProjectionPolarEquidistant("South");break;default:v.current.globe.projection=new m.a.ProjectionWgs84}return v.current.redraw(),t[a]}))},toggleNames:K,toggleModel:G,toggleBg:Y,toggleOv:q,toggleDem:J,northUp:V}}var K=a(8),Y=a(3);var q=function(e){var t=e.id,a=e.alt,n=Object(c.useGlobal)("mapSettings"),r=Object(s.a)(n,2),o=r[0],i=r[1],u=Object(c.useGlobal)("position"),g=Object(s.a)(u,2),h=g[0],d=(g[1],Object(c.useGlobal)("viewDate")),f=Object(s.a)(d,2),m=f[0],b=(f[1],Object(c.useGlobal)("satellites")),j=Object(s.a)(b,2),p=j[0],v=j[1],O=Object(c.useState)(o),S=Object(s.a)(O,2),E=S[0],_=S[1],M=Object(c.useState)(p),y=Object(s.a)(M,2),w=y[0],R=y[1],A=H({id:t,clat:h.clat,clon:h.clon,alt:a,starfield:o.starfield,atmosphere:o.atmosphere,background:o.background,overlay:o.overlay,satellites:p,names:o.names,dem:o.dem}),C=(A.ewwstate,A.moveTo,A.addGeojson,A.removeGeojson),D=(A.addWMS,A.toggleProjection),x=(A.toggleOv,A.toggleModel,A.setTime),T=(A.toggleDem,A.northUp);return Object(K.a)("p",D),Object(K.a)("c",C),Object(K.a)("u",T),Object(K.a)("b",(function(){return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{background:e.background+1})}))})),Object(K.a)("m",(function(){return R((function(e){return!e}))})),Object(K.a)("d",(function(){return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{dem:!e.dem})}))})),Object(K.a)("o",(function(){return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{overlay:e.overlay+1})}))})),Object(K.a)("a",(function(){return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{atmosphere:!e.atmosphere})}))})),Object(K.a)("s",(function(){return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{starfield:!e.starfield})}))})),Object(K.a)("n",(function(){return _((function(e){return Object(l.a)(Object(l.a)({},e),{},{names:!e.names})}))})),Object(c.useEffect)((function(){x(m.getTime())}),[m]),Object(c.useEffect)((function(){i(E)}),[E]),Object(c.useEffect)((function(){_(o)}),[o]),Object(c.useEffect)((function(){v(w)}),[w]),Object(c.useEffect)((function(){R(p)}),[p]),Object(Y.jsx)("canvas",{id:t,style:{background:"black",position:"fixed",left:0,width:"100%",height:"100%"}})},J=a(28),X=a.n(J);a(140);var Z=function(e){var t=e.date,a=e.highlight;return e.animated,Object(Y.jsxs)("div",{className:"LabelContainer",children:[Object(Y.jsx)("hi",{className:"year"===a?"Highlighted":"",children:t.getUTCFullYear()}),"-",Object(Y.jsx)("hi",{className:"month"===a?"Highlighted":"",children:X()(t,"UTC:mmm").toUpperCase()}),"-",Object(Y.jsx)("hi",{className:"day"===a?"Highlighted":"",children:X()(t,"UTC:dd")}),"\xa0/\xa0",Object(Y.jsx)("hi",{className:"hour"===a?"Highlighted":"",children:X()(t,"UTC:HH")}),":",Object(Y.jsx)("hi",{className:"minute"===a?"Highlighted":"",children:X()(t,"UTC:MM")}),":",Object(Y.jsx)("hi",{className:"second"===a?"Highlighted":"",children:X()(t,"UTC:ss")})]})};function Q(e){var t=e.autoStart,a=e.initdate,r=Object(n.useState)(a),o=Object(s.a)(r,2),i=o[0],c=o[1],l=Object(n.useRef)(),u=Object(n.useRef)(),g=Object(n.useRef)();g.current=200;var h=Object(n.useRef)(),d=Object(n.useRef)(),f=Object(n.useRef)();function m(){console.log("start clock"),u.current||(u.current=g.current),l.current||(d.current=setInterval((function(){h.current+=u.current,c(new Date(h.current))}),g.current)),l.current=!0}return Object(n.useEffect)((function(){console.log("init start useclock "+a.toJSON()),h.current=a.getTime()}),[a]),Object(n.useEffect)((function(){console.log("render useclock"),h.current=(new Date).getTime(),t&&m()}),[t]),{date:i,playing:l,togglePause:function(){l.current?function(){console.log("stop clock"),f.current&&clearTimeout(f.current);d.current&&clearInterval(d.current);l.current=!1}():m()},reset:function(){h.current=(new Date).getTime(),c(new Date(h.current))},increaseSpeed:function(){u.current=u.current>0?u.current*=2:u.current/=2,Math.abs(u.current)<g.current&&(u.current=g.current),console.log("step: "+u.current)},decreaseSpeed:function(){u.current=u.current>0?u.current/=2:u.current*=2,Math.abs(u.current)<g.current&&(u.current=-1*g.current),console.log("step: "+u.current)},forceDate:function(e){console.log("forcedate useclock: "+e.toJSON()),h.current=e.getTime()}}}a(141);var $=function(e){var t=e.startdate,a=e.onDateChange,r=Q({autoStart:!1,initdate:t}),o=r.date,i=r.togglePause,c=r.reset,l=r.increaseSpeed,u=r.decreaseSpeed;Object(K.a)("t",i),Object(K.a)("r",(function(){c()})),Object(K.a)(".",l),Object(K.a)(",",u),Object(n.useEffect)((function(){a(o)}),[o]);var g=Object(n.useState)(),h=Object(s.a)(g,2),d=h[0],f=h[1];return Object(Y.jsx)("div",{className:"DateController",onClick:function(){var e=Date.now();d&&e-d<400?c():(f(e),i())}})},ee=a(15),te=a(45),ae=a(108);a(79);var ne=function(e){var t=e.date,a=e.zoomfactor,r=e.step,o=Object(n.useRef)(),i=Object(n.useState)(1),c=Object(s.a)(i,2),l=c[0],u=(c[1],Object(n.useState)(!1)),g=Object(s.a)(u,2),h=(g[0],g[1],Object(n.useState)("")),d=Object(s.a)(h,2),f=d[0],m=d[1];return Object(n.useEffect)((function(){return function(){}})),Object(n.useLayoutEffect)((function(){m(function(e,t){if(o.current){for(var a,n,r,i,s=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],c=0,u=0,g=0,h=0,d=0,f=0,m=[],b=0;b<o.current.offsetHeight;b+=1){var j=new Date((b-o.current.offsetHeight/2)*t+e.getTime());switch(a=j.getUTCDate(),n=j.getUTCMonth(),r=j.getUTCHours(),i=j.getUTCFullYear(),c=j.getUTCMinutes(),!0){case t<2e3:c!==f&&(0!==c||0!==r?m.push({class:"HourTic",pos:b,label:p(r,2)+":"+p(c,2)}):0===c&&0===r&&(m.push({class:"DayTic_h",pos:b,label:p(a,2)}),m.push({class:"MonthTic_h2",pos:b,label:s[n]})));break;case t<4e4:c!==f&&(0===c&&0==r||c%10!==0?0===c&&0===r&&(m.push({class:"DayTic_h",pos:b,label:p(a,2)}),m.push({class:"MonthTic_h2",pos:b,label:s[n]})):m.push({class:"HourTic",pos:b,label:p(r,2)+":"+p(c,2)}));break;case t<18e4:r!==d&&(0!==r?m.push({class:"HourTic",pos:b,label:p(r,2)+":00"}):(m.push({class:"DayTic_h",pos:b,label:p(a,2)}),m.push({class:"MonthTic_h2",pos:b,label:s[n]})));break;case t<42e4:r!==d&&(0!==r&&r%3===0?m.push({class:"HourTic",pos:b,label:p(r,2)+":00"}):0===r&&(m.push({class:"DayTic_h",pos:b,label:p(a,2)}),m.push({class:"MonthTic_h2",pos:b,label:s[n]})));break;case t<42e5:a!==u&&(1!==a?m.push({class:"DayTic",pos:b,label:a}):(m.push({class:"MonthTic_h",pos:b,label:s[n]}),0===n&&m.push({class:"YearTic_h2",pos:b,label:i})));break;case t<288e5:a!==u&&(1!==a&&30!==a&&a%5===0?m.push({class:"DayTic",pos:b,label:a}):1==a&&(m.push({class:"MonthTic_h",pos:b,label:s[n]}),0===n&&m.push({class:"YearTic_h2",pos:b,label:i})));break;case t<1728e5:n!==g&&(0!==n?m.push({class:"MonthTic",pos:b,label:s[n]}):(m.push({class:"MonthTic_h",pos:b,label:s[n]}),m.push({class:"YearTic_h2",pos:b,label:i})));break;case t<3456e5:n!==g&&(0!==n&&11!==n&&n%3===0?m.push({class:"MonthTic",pos:b,label:s[n]}):0==n&&(m.push({class:"MonthTic_h",pos:b,label:s[n]}),m.push({class:"YearTic_h2",pos:b,label:i})));break;case t<7776e6:i!==h&&(0!==n?m.push({class:"MonthTic",pos:b,label:s[n]}):m.push({class:"YearTic",pos:b,label:i}))}u=a,h=i,g=n,d=r,f=c}return m.map((function(e){return Object(Y.jsx)(ee.a.div,{className:e.class,style:{top:e.pos,opacity:l},children:e.label},e.class+e.pos)}))}function p(e,t){for(var a=""+e;a.length<t;)a="0"+a;return a}}(t,a))}),[a,t]),Object(n.useEffect)((function(){console.log("step changed to: "+r)}),[r]),Object(Y.jsx)(ee.a.div,{ref:o,className:"DateSelectorScale",children:f})};var re=function(e){var t=e.startdate,a=e.onDateChange,r=e.onFinalDateChange,o=e.onStepChange,i=1296e6,c=36e5,u=Object(n.useRef)(),g=Object(n.useRef)(),h=Object(n.useRef)();g.current||(g.current=c),h.current||(h.current=0);var d=Object(n.useState)(t),f=Object(s.a)(d,2),m=f[0],b=f[1],j=Object(n.useState)(t),p=Object(s.a)(j,2),v=p[0],O=p[1],S=Object(n.useState)(!1),E=Object(s.a)(S,2),_=E[0],M=E[1],y=Object(n.useState)(6e4),w=Object(s.a)(y,2),R=w[0],A=w[1],C=Object(n.useState)("hour"),D=Object(s.a)(C,2),x=D[0],T=D[1],L=Object(n.useState)(c),N=Object(s.a)(L,2),P=N[0],k=N[1];g.current||(g.current=c);var F=Object(n.useRef)(),I=Object(n.useRef)(),V=function(){var e=Date.now();F.current&&e-F.current<300&&!_?I.current=!0:(F.current=e,I.current=!1)},U=Object(ee.b)((function(){return{posxy_drag:[0,0]}})),G=Object(s.a)(U,2),B=G[0].posxy_drag,z=G[1],W=Object(ee.b)((function(){return{xy2:[0,0]}})),H=Object(s.a)(W,2),K=H[0].xy2,q=H[1],J=Object(ee.b)((function(){return{posy_wheel:0}})),X=Object(s.a)(J,2),Z=X[0].posy_wheel,Q=X[1],$=Object(te.a)({onDragEnd:function(){g.current=P},onWheel:function(e){e.delta;var t=e.first,n=e.down,o=(e.direction,e.velocity,e.xy,e.movement),i=e.memo,s=void 0===i?Z.getValue():i;return Q({posy_wheel:o[1]+h.current,immediate:!1,config:{},onFrame:function(){if(!t){var e=new Date(v.getTime()+Math.ceil(o[1]*P/R)*R);b(e),a(e)}h.current=Z.getValue()},onRest:function(){if(!n){M(!1);var e=new Date(v.getTime()+Math.ceil(Z.getValue()*P/R)*R);r(e),O(e),h.current=0}}}),s},onDrag:function(e){e.event;var t,n=e.active,o=e.first,s=e.down,c=(e.touches,e.delta),l=e.velocity,u=e.direction,g=e.shiftKey,d=(e.xy,e.movement),f=e.temp,j=void 0===f?{lastzoom:P,lastdelta:[0,0],currentzoom:P}:f;return o&&(M(!0),V(),O(m),h.current=0),I.current||g?((t=j.currentzoom+j.currentzoom/50*c[1]*-1)<1e3&&(t=1e3),t>i&&(t=i),k(t),j.currentzoom=t,j.lastdelta=c,s||M(!1),j):(l=Math.abs(l)<.2?0:l,z({posxy_drag:d,immediate:n,config:{velocity:Object(ae.scale)(u,l),decay:!0},onFrame:function(){if(!o){var e=new Date(v.getTime()-Math.ceil(B.getValue()[1]*P/R)*R);b(e),a(e)}},onRest:function(){if(!s){M(!1);var e=new Date(v.getTime()-Math.ceil(B.getValue()[1]*P/R)*R);r(e),O(e)}}}),j)}},{reset:!0,drag:{useTouch:!0}});return Object(n.useEffect)((function(){_||function(e){if(!_){var t=[0,(v.getTime()-e.getTime())/P];q({xy2:t,immediate:!1,config:{reset:!0,config:{duration:200}},onFrame:function(){var e=new Date(v.getTime()-K.getValue()[1]*P);b(e),a(e)},onRest:function(){var e=new Date(v.getTime()-K.getValue()[1]*P);K.setValue([0,0]),b(e),O(e)}})}}(t)}),[t]),Object(n.useEffect)((function(){console.log("Selector active: "+_)}),[_]),Object(n.useEffect)((function(){o(x)}),[x]),Object(n.useEffect)((function(){switch(!0){case P>120426316:A(2592e6),T("month");break;case P>14544702:A(864e5),T("day");break;case P>735259:A(36e5),T("hour");break;case P>32274:A(6e4),T("minute");break;default:A(1e3),T("second")}}),[P]),Object(Y.jsx)(ee.a.div,{className:"DateSelector",ref:u,children:Object(Y.jsxs)("div",{className:"Mask",children:[Object(Y.jsx)("div",Object(l.a)(Object(l.a)({},$()),{},{className:"touchMask",children:" "})),Object(Y.jsx)(ne,{className:"scale",date:m,zoomfactor:P,step:R}),Object(Y.jsx)("div",{className:"TriangleContainer",children:Object(Y.jsx)("svg",{height:"40",width:"20",className:"Triangle",children:Object(Y.jsx)("polygon",{points:"20,5 20,35 12,20"})})})]})})};var oe=function(e){var t=e.onDateChange,a=e.onFinalDateChange,r=e.animated,o=new Date,i=Object(n.useState)(o),c=Object(s.a)(i,2),l=c[0],u=c[1],g=Object(n.useState)(o),h=Object(s.a)(g,2),d=h[0],f=h[1],m=Object(n.useState)(o),b=Object(s.a)(m,2),j=b[0],p=b[1],v=Object(n.useState)(1),O=Object(s.a)(v,2),S=O[0],E=O[1];return Object(Y.jsxs)("div",{children:[Object(Y.jsx)($,{startdate:d,onDateChange:function(e){u(e)}}),Object(Y.jsx)(Z,{date:j,animated:r,highlight:S}),Object(Y.jsx)(re,{startdate:l,onDateChange:function(e){p(e),t(e)},onFinalDateChange:function(e){f(e),a(e)},onStepChange:function(e){console.log("handleSelectorStepChange"+e),E(e)}})]})},ie=(a(142),a(109)),se=a(110);var ce=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],o=a[1],i=Object(ee.b)((function(){return{mr:-300}})),c=Object(s.a)(i,2),u=c[0].mr,g=c[1],h=Object(te.a)({onDrag:function(e){var t=e.down,a=e.delta;e.vxvy[0]>1||!t&&a[0]>100?(g({mr:-300}),o(!0)):(g({mr:t?-Math.max(a[0],0):0}),o(!1))}});return Object(Y.jsxs)(ee.a.div,Object(l.a)(Object(l.a)({},h()),{},{style:{right:u,top:0},className:"ControlPanel",children:[Object(Y.jsx)("div",{className:"PanelControl shadow",onClick:function(){return g(r?{mr:0}:{mr:-300})},children:Object(Y.jsx)(ie.Icon,{icon:se.a,width:"100%"})}),e.children]}))};a(143);var le=function(e){var t=e.initialmission,a=e.onMissionChange,r=Object(n.useState)(t),o=Object(s.a)(r,2),i=o[0],c=o[1];return Object(K.a)("1",(function(){c("S1")})),Object(K.a)("2",(function(){c("S2")})),Object(K.a)("3",(function(){c("S3")})),Object(K.a)("5",(function(){c("S5P")})),Object(K.a)("6",(function(){c("ENVISAT")})),Object(n.useEffect)((function(){console.log("Mission changed to: "+i),a(i)}),[i]),Object(Y.jsxs)("div",{className:"MissionSelector",children:[Object(Y.jsx)("div",{className:"S1"==i?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MissionIcon",src:"./images/s1_black.png",alt:"",onClick:function(){return c("S1")}})}),Object(Y.jsx)("div",{className:"S2"==i?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MissionIcon",src:"./images/s2_black.png",alt:"",onClick:function(){return c("S2")}})}),Object(Y.jsx)("div",{className:"S3"==i?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MissionIcon",src:"./images/s3_black.png",alt:"",onClick:function(){return c("S3")}})}),Object(Y.jsx)("div",{className:"S5P"==i?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MissionIcon",src:"./images/s5p_black.png",alt:"",onClick:function(){return c("S5P")}})})]})};var ue=function(){var e=Object(c.useGlobal)("mission"),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(Y.jsx)(le,{initialmission:a,onMissionChange:n})};a(144);var ge=function(e){var t=e.mapSettings,a=e.onMapSettingsChange,r=Object(n.useState)(t),o=Object(s.a)(r,2),i=o[0],c=o[1];return Object(n.useEffect)((function(){a(i)}),[i]),Object(n.useEffect)((function(){c(t)}),[t]),Object(Y.jsxs)("div",{className:"MapSelector",children:[Object(Y.jsx)("div",{className:t.atmosphere?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/atmosphere.png",alt:"",onClick:function(){return c((function(e){return Object(l.a)(Object(l.a)({},e),{},{atmosphere:!e.atmosphere})}))}})}),Object(Y.jsx)("div",{className:t.starfield?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/starfield.png",alt:"",onClick:function(){return c((function(e){return Object(l.a)(Object(l.a)({},e),{},{starfield:!e.starfield})}))}})}),Object(Y.jsx)("div",{className:t.names?"CircleButtonSelected":"CircleButton",children:Object(Y.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return c((function(e){return Object(l.a)(Object(l.a)({},e),{},{names:!e.names})}))}})}),Object(Y.jsx)("div",{className:"CircleButton",children:Object(Y.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return c((function(e){return Object(l.a)(Object(l.a)({},e),{},{background:e.background+1})}))}})})]})};var he=function(){var e=Object(c.useGlobal)("mapSettings"),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(Y.jsx)(ge,{mapSettings:a,onMapSettingsChange:n})},de=a(115);a(253);var fe=function(){var e=Object(c.useGlobal)("appColor"),t=Object(s.a)(e,2),a=t[0];return t[1],Object(Y.jsx)("div",{className:"ColorSelector",children:Object(Y.jsx)(de.a,{color:a,onChangeComplete:function(e){document.documentElement.style.setProperty("--color",e.hex)}})})},me=a(71);var be=function(){var e=Object(c.useGlobal)("viewDate"),t=Object(s.a)(e,2),a=(t[0],t[1]);return Object(Y.jsx)(oe,{onDateChange:a,onFinalDateChange:a})};var je=function(){var e=Object(me.b)(),t=Object(c.useGlobal)("mission"),a=Object(s.a)(t,1)[0],r=Object(c.useGlobal)("mapSettings"),o=Object(s.a)(r,1)[0],i=Object(c.useGlobal)("appColor"),l=(Object(s.a)(i,1)[0],Object(n.useState)(!1)),u=Object(s.a)(l,2),g=u[0];return u[1],Object(K.a)("f",e.enter),Object(n.useEffect)((function(){console.log("fullScreen changed to: "+g)}),[g]),Object(n.useEffect)((function(){console.log("time to init earth"),console.log(o)}),[]),Object(Y.jsx)("div",{className:"App",children:Object(Y.jsxs)(me.a,{handle:e,children:[Object(Y.jsx)("div",{className:"Earth",children:Object(Y.jsx)(q,{id:"globe"})}),Object(Y.jsx)(be,{}),Object(Y.jsxs)(ce,{active:"true",children:[Object(Y.jsx)("div",{class:"logo",children:Object(Y.jsx)("img",{src:"./images/ESA_logo_2020_White.png",height:"40"})}),Object(Y.jsx)("div",{children:Object(Y.jsx)("img",{src:"./images/EOi_logo.png",height:"150"})}),Object(Y.jsx)(ue,{}),Object(Y.jsx)(he,{}),Object(Y.jsx)(fe,{})]}),Object(Y.jsx)("div",{className:"MissionLabel",children:a})]})})},pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,256)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))};console.log("init global: "+(new Date).getTime()),Object(c.setGlobal)({mission:"S1",satellites:!1,appColor:"#222222",position:{clon:"0.5",clat:"40"},viewDate:new Date,mapSettings:{atmosphere:!0,starfield:!0,names:!1,background:1,overlay:2,dem:!0}}),i.a.render(Object(Y.jsx)(r.a.StrictMode,{children:Object(Y.jsx)(je,{})}),document.getElementById("root")),pe()},79:function(e,t,a){}},[[254,1,2]]]);
//# sourceMappingURL=main.805cf044.chunk.js.map