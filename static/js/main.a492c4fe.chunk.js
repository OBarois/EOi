(this.webpackJsonpeoi=this.webpackJsonpeoi||[]).push([[0],{120:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(106),o=a.n(i),s=(a(120),a(5)),l=a(7),c=(a(135),a(6)),u=(a(136),a(44)),h=a.n(u),d=a(107),f=a(17),g=a(1),m=a.n(g),p=a(10),b=a(13),_=a(12),v=a(11),y=m.a.Angle,S=m.a.ArgumentError,O=m.a.Logger,x={getAsGeographicLocation:function(e){if(e instanceof Date===!1)throw new S(O.logMessage(O.LEVEL_SEVERE,"SunPosition","getAsGeographicLocation","missingDate"));var t=this.getAsCelestialLocation(e);return this.celestialToGeographic(t,e)},getAsCelestialLocation:function(e){if(e instanceof Date===!1)throw new S(O.logMessage(O.LEVEL_SEVERE,"SunPosition","getAsCelestialLocation","missingDate"));var t=this.computeJulianDate(e)-2451545,a=this.normalizeAngle360(280.46+.9856474*t),n=this.normalizeAngle360(357.528+.9856003*t)*y.DEGREES_TO_RADIANS,r=a+1.915*Math.sin(n)+.02*Math.sin(2*n),i=r*y.DEGREES_TO_RADIANS,o=(23.439-4e-7*t)*y.DEGREES_TO_RADIANS,s=Math.asin(Math.sin(o)*Math.sin(i))*y.RADIANS_TO_DEGREES,l=Math.atan(Math.cos(o)*Math.tan(i))*y.RADIANS_TO_DEGREES;return r>=90&&r<270&&(l+=180),{declination:s,rightAscension:l=this.normalizeAngle360(l)}},celestialToGeographic:function(e,t){if(!e)throw new S(O.logMessage(O.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingCelestialLocation"));if(t instanceof Date===!1)throw new S(O.logMessage(O.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingDate"));var a=this.computeJulianDate(t)-2451545,n=this.normalizeAngle360(280.46061837+360.98564736629*a),r=this.normalizeAngle360(n-e.rightAscension),i=y.normalizedDegreesLongitude(-r);return{latitude:e.declination,longitude:i}},computeJulianDate:function(e){if(e instanceof Date===!1)throw new S(O.logMessage(O.LEVEL_SEVERE,"SunPosition","computeJulianDate","missingDate"));var t=e.getUTCFullYear(),a=e.getUTCMonth()+1,n=e.getUTCDate(),r=(e.getUTCHours()+e.getUTCMinutes()/60+e.getUTCSeconds()/3600)/24;a<=2&&(t-=1,a+=12);var i=Math.trunc(t/100),o=2-i+Math.trunc(i/4);return Math.trunc(365.25*(t+4716))+Math.trunc(30.6001*(a+1))+n+o-1524.5+r},normalizeAngle360:function(e){var t=e%360;return t>=0?t:t<0?360+t:360-t}},M=m.a.Angle,E={SUN:0,MERCURY:1,VENUS:2,MARS:4,JUPITER:5,SATURN:6,URANUS:7,NEPTUNE:8,getCelestialLocation:function(e,t){var a,n=x.computeJulianDate(t)-2451543.5;switch(e){case this.SUN:a=this.computeSun(n);break;case this.MERCURY:a=this.computeMercury(n);break;case this.VENUS:a=this.computeVenus(n);break;case this.MARS:a=this.computeMars(n);break;case this.JUPITER:a=this.computeJupiter(n);break;case this.SATURN:a=this.computeSaturn(n);break;case this.URANUS:a=this.computeUranus(n);break;case this.NEPTUNE:a=this.computeNeptune(n)}return this.computePosition(n,a)},computeMercury:function(e){return{N:48.3313+324587e-10*e,i:7.0047+5e-8*e,w:29.1241+101444e-10*e,a:.387098,e:.205635+5.59e-10*e,M:168.6562+4.0923344368*e}},computeVenus:function(e){return{N:76.6799+24659e-9*e,i:3.3946+2.75e-8*e,w:54.891+138374e-10*e,a:.72333,e:.006773-1.302e-9*e,M:48.0052+1.6021302244*e}},computeMars:function(e){return{N:49.5574+211081e-10*e,i:1.8497-1.78e-8*e,w:286.5016+292961e-10*e,a:1.523688,e:.093405+2.516e-9*e,M:18.6021+.5240207766*e}},computeJupiter:function(e){return{N:100.4542+276854e-10*e,i:1.303-1.557e-7*e,w:273.8777+164505e-10*e,a:5.20256,e:.048498+4.469e-9*e,M:19.895+.0830853001*e}},computeSaturn:function(e){return{N:113.6634+23898e-9*e,i:2.4886-1.081e-7*e,w:339.3939+297661e-10*e,a:9.55475,e:.055546-9.499e-9*e,M:316.967+.0334442282*e}},computeUranus:function(e){return{N:74.0005+13978e-9*e,i:.7733+19e-9*e,w:96.6612+30565e-9*e,a:19.18171-1.55e-8*e,e:.047318+7.45e-9*e,M:142.5905+.011725806*e}},computeNeptune:function(e){return{N:131.7806+30173e-9*e,i:1.77-255e-9*e,w:272.8461-6027e-9*e,a:30.05826+3.313e-8*e,e:.008606+2.15e-9*e,M:260.2471+.005995147*e}},computeSun:function(e){return{N:0,i:0,w:282.9404+470935e-10*e,a:1,e:.016709-1.151e-9*e,M:356.047+.9856002585*e}},computePosition:function(e,t){var a=t.N,n=t.i,r=t.w,i=t.a,o=t.e,s=t.M;a=x.normalizeAngle360(a)*M.DEGREES_TO_RADIANS,n=x.normalizeAngle360(n)*M.DEGREES_TO_RADIANS,r=x.normalizeAngle360(r)*M.DEGREES_TO_RADIANS;var l=(s=x.normalizeAngle360(s)*M.DEGREES_TO_RADIANS)+o*Math.sin(s)*(1+o*Math.cos(s));if(o>=.06)for(var c=0;c<10;c++){var u=l-(l-o*Math.sin(l)-s)/(1-o*Math.cos(l));if(Math.abs(u-l)<.001){l=u;break}l=u}var h=i*(Math.cos(l)-o),d=i*(Math.sqrt(1-o*o)*Math.sin(l)),f=Math.atan2(d,h),g=Math.sqrt(h*h+d*d),m=g*(Math.cos(a)*Math.cos(f+r)-Math.sin(a)*Math.sin(f+r)*Math.cos(n)),p=g*(Math.sin(a)*Math.cos(f+r)+Math.cos(a)*Math.sin(f+r)*Math.cos(n)),b=g*(Math.sin(f+r)*Math.sin(n)),_=382394e-10*(0-e)*M.DEGREES_TO_RADIANS,v=Math.atan2(p,m)+_,y=Math.atan2(b,Math.sqrt(m*m+p*p));m=g*Math.cos(v)*Math.cos(y),p=g*Math.sin(v)*Math.cos(y),b=g*Math.sin(y);var S=this.getLonSun(e,this.computeSun(e)),O=S.lonsun,E=S.rsun;O*=M.RADIANS_TO_DEGREES,O=x.normalizeAngle360(O)*M.DEGREES_TO_RADIANS;var j=m+E*Math.cos(O),R=p+E*Math.sin(O),T=b,A=x.normalizeAngle360(23.4393-3.563e-7*e)*M.DEGREES_TO_RADIANS,w=j,C=R*Math.cos(A)-T*Math.sin(A),L=R*Math.sin(A)+T*Math.cos(A);return{ra:x.normalizeAngle360(Math.atan2(C,w)*M.RADIANS_TO_DEGREES),dec:Math.atan2(L,Math.sqrt(w*w+C*C))*M.RADIANS_TO_DEGREES}},getLonSun:function(e,t){var a=t.w,n=t.e,r=t.M;a=x.normalizeAngle360(a)*M.DEGREES_TO_RADIANS;var i=(r=x.normalizeAngle360(r)*M.DEGREES_TO_RADIANS)+n*Math.sin(r)*(1+n*Math.cos(r)),o=Math.cos(i)-n,s=Math.sqrt(1-n*n)*Math.sin(i);return{lonsun:Math.atan2(s,o)+a,rsun:Math.sqrt(o*o+s*s)}}},j=m.a.ArgumentError,R=m.a.GpuProgram,T=m.a.Logger,A=m.a.Matrix,w=m.a.Color,C=function(e){Object(_.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e,"attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nuniform float numDays;\nuniform vec2 magnitudeRange;\nvarying float magnitudeWeight;\nfloat normalizeAngle(float angle) {\n   float angleDivisions = angle / 360.0;\n   return 360.0 * (angleDivisions - floor(angleDivisions));\n}\nvec3 computePosition(float dec, float ra) {\n   float GMST = normalizeAngle(280.46061837 + 360.98564736629 * numDays);\n   float GHA = normalizeAngle(GMST - ra);\n   float lon = -GHA + 360.0 * step(180.0, GHA);\n   float latRad = radians(dec);\n   float lonRad = radians(lon);\n   float radCosLat = cos(latRad);\n   return vec3(radCosLat * sin(lonRad), sin(latRad), radCosLat * cos(lonRad));\n}\nfloat normalizeScalar(float value, float minValue, float maxValue){\n   return (value - minValue) / (maxValue - minValue);\n}\nvoid main() {\n   vec3 vertexPosition = computePosition(vertexPoint.x, vertexPoint.y);\n   gl_Position = mvpMatrix * vec4(vertexPosition.xyz, 1.0);\n   gl_Position.z = gl_Position.w - 0.00001;\n   gl_PointSize = vertexPoint.z;\n   magnitudeWeight = normalizeScalar(vertexPoint.w, magnitudeRange.x, magnitudeRange.y);\n}","precision mediump float;\nuniform sampler2D textureSampler;\nuniform int fragMode;\nuniform vec4 color;\nvarying float magnitudeWeight;\nconst vec4 white = vec4(1.0, 1.0, 1.0, 1.0);\nconst vec4 grey = vec4(0.5, 0.5, 0.5, 1.0);\nvoid main() {\n   if (fragMode == 1) {\n       gl_FragColor = texture2D(textureSampler, gl_PointCoord);\n   }\n   else if (fragMode == 0) {\n       gl_FragColor = mix(white, grey, magnitudeWeight);\n   }\n   else if (fragMode == 2) {\n       gl_FragColor = color;\n   }\n}",["vertexPoint"])).FRAG_MODE_MIX_COLOR=0,n.FRAG_MODE_TEXTURE=1,n.FRAG_MODE_COLOR=2,n.vertexPointLocation=n.attributeLocation(e,"vertexPoint"),n.mvpMatrixLocation=n.uniformLocation(e,"mvpMatrix"),n.numDaysLocation=n.uniformLocation(e,"numDays"),n.magnitudeRangeLocation=n.uniformLocation(e,"magnitudeRange"),n.textureUnitLocation=n.uniformLocation(e,"textureSampler"),n.fragModeLocation=n.uniformLocation(e,"fragMode"),n.colorLocation=n.uniformLocation(e,"color"),n.localState={mvpMatrix:null,numDays:null,magnitudeRange:null,textureUnit:null,fragMode:null,color:null},n}return Object(b.a)(a,[{key:"loadModelviewProjection",value:function(e,t){if(!t)throw new j(T.logMessage(T.LEVEL_SEVERE,"StarFieldProgram","loadModelviewProjection","missingMatrix"));var a=!1;null===this.localState.mvpMatrix&&(a=!0,this.localState.mvpMatrix=A.fromIdentity()),!a&&this.localState.mvpMatrix.equals(t)||(this.loadUniformMatrix(e,t,this.mvpMatrixLocation),this.localState.mvpMatrix.copy(t))}},{key:"loadNumDays",value:function(e,t){if(null==t)throw new j(T.logMessage(T.LEVEL_SEVERE,"StarFieldProgram","loadNumDays","missingNumDays"));this.localState.numDays!==t&&(e.uniform1f(this.numDaysLocation,t),this.localState.numDays=t)}},{key:"loadMagnitudeRange",value:function(e,t,a){if(null==t)throw new j(T.logMessage(T.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMinMag"));if(null==a)throw new j(T.logMessage(T.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMaxMag"));var n=!1;null===this.localState.magnitudeRange&&(n=!0,this.localState.magnitudeRange=[t,a]),(n||this.localState.magnitudeRange[0]!==t||this.localState.magnitudeRange[1]!==a)&&(e.uniform2f(this.magnitudeRangeLocation,t,a),this.localState.magnitudeRange[0]=t,this.localState.magnitudeRange[1]=a)}},{key:"loadTextureUnit",value:function(e,t){this.localState.textureUnit!==t&&(e.uniform1i(this.textureUnitLocation,t-e.TEXTURE0),this.localState.textureUnit=t)}},{key:"loadFragMode",value:function(e,t){this.localState.fragMode!==t&&(e.uniform1i(this.fragModeLocation,t),this.localState.fragMode=t)}},{key:"loadColor",value:function(e,t){var a=!1;null===this.localState.color&&(a=!0,this.localState.color=new w(0,0,0,0)),!a&&this.localState.color.equals(t)||(this.loadUniformColor(e,t,this.colorLocation),this.localState.color.copy(t))}}]),a}(R);C.key="WorldWindGpuStarFieldFullProgram";var L=C,D=(m.a.Color,m.a.Layer),P=m.a.Logger,N=m.a.Matrix,F=m.a.REDRAW_EVENT_TYPE,k=function(e){Object(_.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,"StarField")).pickEnabled=!1,n.sunSize=128,n.showSun=!0,n._starDataSource=e||m.a.configuration.baseUrl+"data/stars.json",n._sunImageSource=m.a.configuration.baseUrl+"images/sunTexture.png",n._matrix=N.fromIdentity(),n._starsPositionsVboCacheKey=null,n._numStars=0,n._starData=null,n._minMagnitude=Number.MAX_VALUE,n._maxMagnitude=Number.MIN_VALUE,n._loadStarted=!1,n._minScale=3e7,n._scale=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,n._sunPositionsCacheKey="",n._sunBufferView=new Float32Array(4),n._MAX_GL_POINT_SIZE=0,n.showPlanets=!0;var r=32;return n.planets=[{id:E.MERCURY,url:"images/Mercury64.png",size:8,ra:null,dec:null},{id:E.VENUS,url:"images/Venus64.png",size:8,ra:null,dec:null},{id:E.MARS,url:"images/Mars64.png",size:8,ra:null,dec:null},{id:E.JUPITER,url:"images/Jupiter64.png",size:r,ra:null,dec:null},{id:E.SATURN,url:"images/Saturn64.png",size:r,ra:null,dec:null},{id:E.URANUS,url:"images/Uranus64.png",size:16,ra:null,dec:null},{id:E.NEPTUNE,url:"images/Neptune64.png",size:16,ra:null,dec:null}],n._planetsBufferView=null,n._cacheKeys={sunPosition:"",planetPositions:"",starPositions:""},n}return Object(b.a)(a,[{key:"starDataSource",get:function(){return this._starDataSource},set:function(e){this._starDataSource=e,this.invalidateStarData()}},{key:"sunImageSource",get:function(){return this._sunImageSource},set:function(e){this._sunImageSource=e}},{key:"doRender",value:function(e){if(!e.globe.is2D())if(this.haveResources(e)){this.beginRendering(e);try{this.doDraw(e)}finally{this.endRendering(e)}}else this.loadResources(e)}},{key:"haveResources",value:function(e){var t=e.gpuResourceCache.resourceForKey(this._sunImageSource),a=this.planets.every((function(t){return!!e.gpuResourceCache.resourceForKey(t.url)}));return null!=this._starData&&null!=t&&a}},{key:"loadResources",value:function(e){var t=e.currentGlContext,a=e.gpuResourceCache;this._starData||this.fetchStarData(),a.resourceForKey(this._sunImageSource)||a.retrieveTexture(t,this._sunImageSource),this.planets.forEach((function(e){a.resourceForKey(e.url)||a.retrieveTexture(t,e.url)}))}},{key:"beginRendering",value:function(e){var t=e.currentGlContext;e.findAndBindProgram(L),t.enableVertexAttribArray(0),t.depthMask(!1)}},{key:"doDraw",value:function(e){this.loadCommonUniforms(e),this.renderStars(e),this.showSun&&this.renderSun(e),this.showPlanets&&this.renderPlanets(e)}},{key:"loadCommonUniforms",value:function(e){var t=e.currentGlContext,a=e.currentProgram,n=e.modelviewProjection||e.navigatorState.modelviewProjection;this._matrix.copy(n),this._matrix.multiplyByScale(this._scale,this._scale,this._scale),a.loadModelviewProjection(t,this._matrix);var r=x.computeJulianDate(this.time||new Date);a.loadNumDays(t,r-2451545)}},{key:"renderStars",value:function(e){var t=e.currentGlContext,a=e.gpuResourceCache,n=e.currentProgram;this._starsPositionsVboCacheKey||(this._starsPositionsVboCacheKey=a.generateCacheKey());var r=a.resourceForKey(this._starsPositionsVboCacheKey);if(r)t.bindBuffer(t.ARRAY_BUFFER,r);else{r=t.createBuffer();var i=this.createStarsGeometry();a.putResource(this._starsPositionsVboCacheKey,r,4*i.length),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW)}e.frameStatistics.incrementVboLoadCount(1),t.vertexAttribPointer(0,4,t.FLOAT,!1,0,0),n.loadMagnitudeRange(t,this._minMagnitude,this._maxMagnitude),n.loadFragMode(t,n.FRAG_MODE_MIX_COLOR),t.drawArrays(t.POINTS,0,this._numStars)}},{key:"renderPlanets",value:function(e){var t=this,a=e.currentGlContext,n=e.currentProgram,r=e.gpuResourceCache;this._MAX_GL_POINT_SIZE||(this._MAX_GL_POINT_SIZE=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]),this.sunSize>this._MAX_GL_POINT_SIZE&&P.log(P.LEVEL_WARNING,"StarFieldLayer - sunSize is to big, max size allowed is: "+this._MAX_GL_POINT_SIZE),this.planets.forEach((function(e){var a=E.getCelestialLocation(e.id,t.time||new Date),n=a.ra,r=a.dec;e.ra=n,e.dec=r}),this),this._planetsBufferView||(this._planetsBufferView=new Float32Array(4*this.planets.length));for(var i=0;i<this.planets.length;i++){var o=this.planets[i];this._planetsBufferView[4*i+0]=o.dec,this._planetsBufferView[4*i+1]=o.ra,this._planetsBufferView[4*i+2]=Math.min(o.size,this._MAX_GL_POINT_SIZE),this._planetsBufferView[4*i+3]=1}this._planetsPositionsVboCacheKey||(this._planetsPositionsVboCacheKey=r.generateCacheKey());var s=r.resourceForKey(this._planetsPositionsVboCacheKey);s?(a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferSubData(a.ARRAY_BUFFER,0,this._planetsBufferView)):(s=a.createBuffer(),r.putResource(this._planetsPositionsVboCacheKey,s,4*this._planetsBufferView.length),a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,this._planetsBufferView,a.DYNAMIC_DRAW)),e.frameStatistics.incrementVboLoadCount(1),a.vertexAttribPointer(0,4,a.FLOAT,!1,0,0),n.loadFragMode(a,n.FRAG_MODE_TEXTURE);for(var l=0;l<this.planets.length;l++){var c=this.planets[l].url;e.gpuResourceCache.resourceForKey(c).bind(e),a.drawArrays(a.POINTS,l,1)}}},{key:"renderSun",value:function(e){var t=e.currentGlContext,a=e.currentProgram,n=e.gpuResourceCache;this._MAX_GL_POINT_SIZE||(this._MAX_GL_POINT_SIZE=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[1]),this.sunSize>this._MAX_GL_POINT_SIZE&&P.log(P.LEVEL_WARNING,"StarFieldLayer - sunSize is to big, max size allowed is: "+this._MAX_GL_POINT_SIZE);var r=x.getAsCelestialLocation(this.time||new Date);this._sunBufferView[0]=r.declination,this._sunBufferView[1]=r.rightAscension,this._sunBufferView[2]=Math.min(this.sunSize,this._MAX_GL_POINT_SIZE),this._sunBufferView[3]=1,this._sunPositionsCacheKey||(this._sunPositionsCacheKey=n.generateCacheKey());var i=n.resourceForKey(this._sunPositionsCacheKey);i?(t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferSubData(t.ARRAY_BUFFER,0,this._sunBufferView)):(i=t.createBuffer(),n.putResource(this._sunPositionsCacheKey,i,4*this._sunBufferView.length),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,this._sunBufferView,t.DYNAMIC_DRAW)),e.frameStatistics.incrementVboLoadCount(1),t.vertexAttribPointer(0,4,t.FLOAT,!1,0,0),a.loadFragMode(t,a.FRAG_MODE_TEXTURE),e.gpuResourceCache.resourceForKey(this._sunImageSource).bind(e),t.drawArrays(t.POINTS,0,1)}},{key:"endRendering",value:function(e){var t=e.currentGlContext;t.depthMask(!0),t.disableVertexAttribArray(0)}},{key:"fetchStarData",value:function(){if(!this._loadStarted){this._loadStarted=!0;var e=this,t=new XMLHttpRequest;t.onload=function(){if(this.status>=200&&this.status<300)try{e._starData=JSON.parse(this.response),e.sendRedrawRequest()}catch(t){P.log(P.LEVEL_SEVERE,"StarFieldLayer unable to parse JSON for star data "+t.toString())}else P.log(P.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data. Status: "+this.status+" "+this.statusText);e._loadStarted=!1},t.onerror=function(){P.log(P.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data"),e._loadStarted=!1},t.ontimeout=function(){P.log(P.LEVEL_SEVERE,"StarFieldLayer fetch star data has timeout"),e._loadStarted=!1},t.open("GET",this._starDataSource,!0),t.send()}}},{key:"createStarsGeometry",value:function(){var e=this.parseStarsMetadata(this._starData.metadata);if(-1===e.raIndex)throw new Error(P.logMessage(P.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing ra field in star data."));if(-1===e.decIndex)throw new Error(P.logMessage(P.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing dec field in star data."));if(-1===e.magIndex)throw new Error(P.logMessage(P.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing vmag field in star data."));var t=this._starData.data,a=[];this._minMagnitude=Number.MAX_VALUE,this._maxMagnitude=Number.MIN_VALUE;for(var n=0,r=t.length;n<r;n++){var i=t[n],o=i[e.decIndex],s=i[e.raIndex],l=i[e.magIndex],c=l<2?2:1;a.push(o,s,c,l),this._minMagnitude=Math.min(this._minMagnitude,l),this._maxMagnitude=Math.max(this._maxMagnitude,l)}return this._numStars=Math.floor(a.length/4),a}},{key:"parseStarsMetadata",value:function(e){for(var t=-1,a=-1,n=-1,r=0,i=e.length;r<i;r++){var o=e[r];"ra"===o.name&&(t=r),"dec"===o.name&&(a=r),"vmag"===o.name&&(n=r)}return{raIndex:t,decIndex:a,magIndex:n}}},{key:"invalidateStarData",value:function(){this._starData=null,this._starsPositionsVboCacheKey=null}},{key:"sendRedrawRequest",value:function(){var e=document.createEvent("Event");e.initEvent(F,!0,!0),window.dispatchEvent(e)}}]),a}(D),I=a(28),U=a.n(I),V=m.a.ArgumentError,B=m.a.BasicTextureProgram,G=m.a.Color,z=m.a.Logger,K=m.a.Matrix,H=(m.a.Position,m.a.PickedObject),Y=m.a.Renderable,W=m.a.Vec3,Z=function(e,t){if(!e)throw new V(z.logMessage(z.LEVEL_SEVERE,"ColladaScene","constructor","missingPosition"));Y.call(this),this._position=e,this._nodes=[],this._meshes={},this._materials={},this._images={},this._upAxis="",this._dirPath="",this._xRotation=0,this._yRotation=0,this._zRotation=0,this.preX=0,this.preY=0,this.preZ=0,this._xTranslation=0,this._yTranslation=0,this._zTranslation=0,this._scale=1,this._altitudeMode=m.a.ABSOLUTE,this._localTransforms=!0,this._useTexturePaths=!0,this._nodesToHide=[],this._hideNodes=!1,this._placePoint=new W(0,0,0),this._transformationMatrix=K.fromIdentity(),this._mvpMatrix=K.fromIdentity(),this._normalTransformMatrix=K.fromIdentity(),this._normalMatrix=K.fromIdentity(),this._texCoordMatrix=K.fromIdentity().setToUnitYFlip(),this._entities=[],this._activeTexture=null,this._tmpVector=new W(0,0,0),this._tmpColor=new G(1,1,1,1),this._vboCacheKey="",this._iboCacheKey="",this.setSceneData(t)};(Z.prototype=Object.create(Y.prototype)).constructor=Z,Object.defineProperties(Z.prototype,{position:{get:function(){return this._position},set:function(e){this._position=e}},nodes:{get:function(){return this._nodes},set:function(e){this._nodes=e}},meshes:{get:function(){return this._meshes},set:function(e){this._meshes=e}},materials:{get:function(){return this._materials},set:function(e){this._materials=e}},images:{get:function(){return this._images},set:function(e){this._images=e}},upAxis:{get:function(){return this._upAxis},set:function(e){this._upAxis=e}},dirPath:{get:function(){return this._dirPath},set:function(e){this._dirPath=e}},xRotation:{get:function(){return this._xRotation},set:function(e){this._xRotation=e}},yRotation:{get:function(){return this._yRotation},set:function(e){this._yRotation=e}},zRotation:{get:function(){return this._zRotation},set:function(e){this._zRotation=e}},xTranslation:{get:function(){return this._xTranslation},set:function(e){this._xTranslation=e}},yTranslation:{get:function(){return this._yTranslation},set:function(e){this._yTranslation=e}},zTranslation:{get:function(){return this._zTranslation},set:function(e){this._zTranslation=e}},scale:{get:function(){return this._scale},set:function(e){this._scale=e}},placePoint:{get:function(){return this._placePoint},set:function(e){this._placePoint=e}},altitudeMode:{get:function(){return this._altitudeMode},set:function(e){this._altitudeMode=e}},transformationMatrix:{get:function(){return this._transformationMatrix},set:function(e){this._transformationMatrix=e}},normalMatrix:{get:function(){return this._normalMatrix},set:function(e){this._normalMatrix=e}},localTransforms:{get:function(){return this._localTransforms},set:function(e){this._localTransforms=e}},useTexturePaths:{get:function(){return this._useTexturePaths},set:function(e){this._useTexturePaths=e}},nodesToHide:{get:function(){return this._nodesToHide},set:function(e){this._nodesToHide=e}},hideNodes:{get:function(){return this._hideNodes},set:function(e){this._hideNodes=e}}}),Z.prototype.setSceneData=function(e){e&&(this._nodes=e.root.children,this._meshes=e.meshes,this._materials=e.materials,this._images=e.images,this._upAxis=e.metadata.up_axis,this._dirPath=e.dirPath,this.flattenModel())},Z.prototype.flattenModel=function(){for(var e=0,t=this._nodes.length;e<t;e++)this.flattenNode(this._nodes[e]);this._entities.sort((function(e,t){var a=null===e.imageKey?"":""+e,n=null===t.imageKey?"":""+t;return a>n?1:a===n?0:-1}))},Z.prototype.flattenNode=function(e){if(e.mesh)for(var t=e.mesh,a=this._meshes[t].buffers,n=0,r=a.length;n<r;n++){for(var i=a[n].material,o=0;o<e.materials.length;o++)if(i===e.materials[o].symbol){var s=e.materials[o].id;break}var l=this._materials[s],c=null;l&&l.textures&&a[n].uvs&&a[n].uvs.length>0&&(l.textures.diffuse?c=l.textures.diffuse.mapId:l.textures.reflective&&(c=l.textures.reflective.mapId)),this._entities.push({mesh:a[n],material:l,node:e,imageKey:c})}for(var u=0;u<e.children.length;u++)this.flattenNode(e.children[u])},Z.prototype.render=function(e){var t,a=e.frustumInModelCoordinates;this.enabled&&(this.lastFrameTime!==e.timestamp&&(t=this.makeOrderedRenderable(e)),t&&a.containsPoint(this._placePoint)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},Z.prototype.makeOrderedRenderable=function(e){return e.surfacePointForMode(this._position.latitude,this._position.longitude,this._position.altitude,this._altitudeMode,this._placePoint),this.eyeDistance=e.eyePoint.distanceTo(this._placePoint),this},Z.prototype.renderOrdered=function(e){if(this.drawOrderedScene(e),e.pickingMode){var t=new H(this.pickColor.clone(),this,this._position,this.layer,!1);e.resolvePick(t)}},Z.prototype.drawOrderedScene=function(e){try{this.beginDrawing(e)}finally{this.endDrawing(e)}},Z.prototype.beginDrawing=function(e){var t=e.currentGlContext,a=e.gpuResourceCache,n=a.resourceForKey(this._vboCacheKey),r=a.resourceForKey(this._iboCacheKey);n||(this.setupBuffers(e),n=a.resourceForKey(this._vboCacheKey),r=a.resourceForKey(this._iboCacheKey)),t.bindBuffer(t.ARRAY_BUFFER,n),r&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),e.findAndBindProgram(B),t.enableVertexAttribArray(0),e.pickingMode&&(this.pickColor=e.uniquePickColor()),this.computeTransformationMatrix(e.globe);for(var i=0,o=this._entities.length;i<o;i++){this.mustRenderNode(this._entities[i].node.id)&&this.draw(e,this._entities[i])}},Z.prototype.setupBuffers=function(e){for(var t=e.currentGlContext,a=Float32Array.BYTES_PER_ELEMENT||4,n=Uint16Array.BYTES_PER_ELEMENT||2,r=Uint32Array.BYTES_PER_ELEMENT||4,i=!1,o=0,s=0,l=0,c=this._entities.length;l<c;l++){var u=this._entities[l].mesh;u.indexedRendering&&(o+=u.indices.length,u.indices instanceof Uint32Array&&(i=!0)),s+=u.vertices.length,this._entities[l].imageKey&&(s+=u.uvs.length),u.normals&&u.normals.length&&(s+=u.normals.length)}var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,s*a,t.STATIC_DRAW);var d=0;for(l=0,c=this._entities.length;l<c;l++){var f=this._entities[l].mesh.vertices;this._entities[l].vertexOffset=d,t.bufferSubData(t.ARRAY_BUFFER,d*a,f),d+=f.length}for(l=0,c=this._entities.length;l<c;l++)this._entities[l].imageKey&&(f=this._entities[l].mesh.uvs,this._entities[l].uvOffset=d,t.bufferSubData(t.ARRAY_BUFFER,d*a,f),d+=f.length);for(l=0,c=this._entities.length;l<c;l++)(f=f=this._entities[l].mesh.normals)&&f.length&&(this._entities[l].normalOffset=d,t.bufferSubData(t.ARRAY_BUFFER,d*a,f),d+=f.length);var g,m=n,p=o*m;if(i&&((g=e.getExtension("OES_element_index_uint"))?p=o*(m=r):z.log(z.LEVEL_SEVERE,'The 3D model is too big and might not render properly. \nYour browser does not support the "OES_element_index_uint" extension, required to render large models.')),o){var b=t.createBuffer();for(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,b),t.bufferData(t.ELEMENT_ARRAY_BUFFER,p,t.STATIC_DRAW),d=0,l=0,c=this._entities.length;l<c;l++)(u=this._entities[l].mesh).indexedRendering&&((f=u.indices)instanceof Uint32Array&&!g&&(f=new Uint16Array(f)),this._entities[l].indexOffset=d,this._entities[l].indexSize=m,t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,d*m,f),d+=f.length)}this._vboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._vboCacheKey,h,s*a),o&&(this._iboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._iboCacheKey,b,p))},Z.prototype.draw=function(e,t){var a=e.currentGlContext,n=e.currentProgram,r=e.gpuResourceCache,i=t.mesh,o=t.material,s=t.node.worldMatrix,l=t.node.normalMatrix,c=i.normals&&i.normals.length,u=t.imageKey;if(this.applyColor(e,o),u){var h=this._useTexturePaths?this._images[u].path:this._images[u].filename,d=this._dirPath+h;if(this._activeTexture=r.resourceForKey(d),!this._activeTexture){var f=i.isClamp?a.CLAMP_TO_EDGE:a.REPEAT;this._activeTexture=r.retrieveTexture(a,d,f)}this._activeTexture&&this._activeTexture.bind(e)?(n.loadTextureEnabled(a,!0),a.vertexAttribPointer(2,2,a.FLOAT,!1,8,4*t.uvOffset),a.enableVertexAttribArray(2),n.loadModulateColor(a,e.pickingMode)):(n.loadTextureEnabled(a,!1),a.disableVertexAttribArray(2))}else n.loadTextureEnabled(a,!1),a.disableVertexAttribArray(2);if(c&&!e.pickingMode?(n.loadApplyLighting(a,1),a.vertexAttribPointer(1,3,a.FLOAT,!1,12,4*t.normalOffset),a.enableVertexAttribArray(1)):(n.loadApplyLighting(a,0),a.disableVertexAttribArray(1)),this.applyMatrix(e,c,d,s,l),a.vertexAttribPointer(0,3,a.FLOAT,!1,12,4*t.vertexOffset),i.indexedRendering){var g=t.indexOffset*t.indexSize;i.indices instanceof Uint32Array&&e.getExtension("OES_element_index_uint")?a.drawElements(a.TRIANGLES,i.indices.length,a.UNSIGNED_INT,g):a.drawElements(a.TRIANGLES,i.indices.length,a.UNSIGNED_SHORT,g)}else a.drawArrays(a.TRIANGLES,0,Math.floor(i.vertices.length/3))},Z.prototype.applyColor=function(e,t){var a,n=e.currentGlContext,r=e.currentProgram;if(t)if("constant"===t.techniqueType)var i=t.reflective;else i=t.diffuse;var o=1,s=1,l=1,c=1;i&&(o=i[0],s=i[1],l=i[2],c=null!=i[3]?i[3]:1),this._tmpColor.set(o,s,l,c),a=c*this.layer.opacity,n.depthMask(a>=1||e.pickingMode),r.loadColor(n,e.pickingMode?this.pickColor:this._tmpColor),r.loadOpacity(n,e.pickingMode?a>0?1:0:a)},Z.prototype.applyMatrix=function(e,t,a,n,r){this._mvpMatrix.copy(e.modelviewProjection),this._mvpMatrix.multiplyMatrix(this._transformationMatrix),n&&this._localTransforms&&this._mvpMatrix.multiplyMatrix(n),t&&!e.pickingMode&&(this._normalMatrix.copy(e.modelviewNormalTransform),this._normalMatrix.multiplyMatrix(this._normalTransformMatrix),r&&this._localTransforms&&this._normalMatrix.multiplyMatrix(r),e.currentProgram.loadModelviewInverse(e.currentGlContext,this._normalMatrix)),a&&this._activeTexture&&(e.currentProgram.loadTextureMatrix(e.currentGlContext,this._texCoordMatrix),this._activeTexture=null),e.currentProgram.loadModelviewProjection(e.currentGlContext,this._mvpMatrix)},Z.prototype.endDrawing=function(e){var t=e.currentGlContext,a=e.currentProgram;t.disableVertexAttribArray(1),t.disableVertexAttribArray(2),a.loadApplyLighting(t,0),a.loadTextureEnabled(t,!1)},Z.prototype.computeTransformationMatrix=function(e){this._transformationMatrix.setToIdentity(),this._transformationMatrix.multiplyByLocalCoordinateTransform(this._placePoint,e),this._transformationMatrix.multiplyByRotation(1,0,0,this._xRotation),this._transformationMatrix.multiplyByRotation(0,1,0,this._yRotation),this._transformationMatrix.multiplyByRotation(0,0,1,this._zRotation),this._transformationMatrix.multiplyByScale(this._scale,this._scale,this._scale),this._transformationMatrix.multiplyByTranslation(this._xTranslation,this._yTranslation,this._zTranslation),this._transformationMatrix.multiplyByRotation(1,0,0,this.preX),this._transformationMatrix.multiplyByRotation(0,1,0,this.preY),this._transformationMatrix.multiplyByRotation(0,0,1,this.preZ),this.computeNormalMatrix()},Z.prototype.computeNormalMatrix=function(){this._transformationMatrix.extractRotationAngles(this._tmpVector),this._normalTransformMatrix.setToIdentity(),this._normalTransformMatrix.multiplyByRotation(-1,0,0,this._tmpVector[0]),this._normalTransformMatrix.multiplyByRotation(0,-1,0,this._tmpVector[1]),this._normalTransformMatrix.multiplyByRotation(0,0,-1,this._tmpVector[2])},Z.prototype.mustRenderNode=function(e){var t=!0;this._hideNodes&&(t=-1===this._nodesToHide.indexOf(e));return t};var X=Z,J=m.a.Matrix,q=function(e){Object(_.a)(a,e);var t=Object(v.a)(a);function a(e,n,r){var i;Object(p.a)(this,a),(i=t.call(this))._satellite=n;var o=i.parse(e);return i.draw(r,o),i}return Object(b.a)(a,[{key:"position",value:function(e){this._model.position=e}},{key:"draw",value:function(e,t){var a=this._satellite,n=a.rotations,r=a.translations,i=a.preRotations,o=a.scale,s=a.shortName,l=a.ignoreLocalTransforms,c=new X(e,t);c.type=this.type,c.satShortName=s,c.nodesToHide=["PlatformCircleAndName","SolarWingsCircleAndName","C-SarCircleAndName","PlatformTextsAndArrows","SolarWingsTextsAndArrows","C-SarTextsAndArrows","SolarArrayGroup","WingsDetailsGroup","Group004","MsiGroup","SatelliteGroup","SatelliteDimensionsGroup","MWRGroup","SRALGroup","OLCIGroup","SLSTRGroup"],c.hideNodes=!0,c.useTexturePaths=!1,c.localTransforms=l,c.scale=o,c.xRotation=n.x,c.yRotation=n.y,c.zRotation=n.z,c.xTranslation=r.x,c.yTranslation=r.y,c.zTranslation=r.z,c.preX=i.x,c.preY=i.y,c.preZ=i.z,this._model=c,t=null}},{key:"parse",value:function(e){var t=e.meshes,a=e.root.children,n=e.materials;for(var r in t)if(t.hasOwnProperty(r))for(var i=t[r].buffers,o=0;o<i.length;o++){var s=i[o].vertices||[],l=i[o].normals||[],c=i[o].uvs||[],u=i[o].indices||[],h=new Float32Array(s),d=new Float32Array(l),f=new Float32Array(c),g=new Uint16Array(u);i[o].vertices=h,i[o].normals=d,i[o].uvs=f,i[o].indices=g}for(var m=0;m<a.length;m++){var p=a[m];if(p.mesh){var b=p.worldMatrix.slice(0);p.worldMatrix=J.fromIdentity(),p.worldMatrix.copy(b),p.children.length&&console.info("node has children",p)}}for(var _ in n)if(n.hasOwnProperty(_)){var v=n[_];"_3_-_Default-material"===v.id?v.reflective&&(v.reflective[0]=.289219,v.reflective[1]=.713497,v.reflective[2]=.870753,v.reflective[3]=1):"_1_-_Default_004-material"===v.id||"_1_-_Default-material"===v.id?v.diffuse[3]=0:"Chrome-material"===v.id?(v.textures=null,v.diffuse[0]=.3137,v.diffuse[1]=.3137,v.diffuse[2]=.3137):"Satellite_panel-material"===v.id?v.textures.reflective.mapId="image9":"_3_-_Default"===v.id?v.textures.reflective.mapId="image4":"_4_-_Default-material"===v.id?v.textures.reflective.mapId="image5":"_5_-_Default_002-material"===v.id?v.textures.reflective.mapId="image6":"_5_-_Default-material"===v.id&&(v.textures.reflective.mapId="image5")}return e}},{key:"render",value:function(e){this._model&&this.enabled&&this._model.render(e)}}]),a}(m.a.Renderable),Q=m.a.Position,$=new(0,m.a.RenderableLayer)("Model");fetch("./satellites/senti2version6/s2.json").then((function(e){return e.json()})).then((function(e){$.addRenderable(new q(e,{rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0},new Q(51,14,1e5)))}));for(var ee=$,te=m.a.Color,ae=[{key:"s1a",name:"SENTINEL-1A",shortName:"S-1A",satIndex:0,swathTypes:["black","red","green","white"],swathColors:[te.colorFromKmlHex("ff000000"),te.colorFromKmlHex("ff0000ff"),te.colorFromKmlHex("ff00ff00"),te.colorFromKmlHex("ffffffff")],swatModes:["IW","EW","SM"],tleLineOne:"1 39634U 14016A   18124.03591006  .00000001  00000-0  10014-4 0  9998",tleLineTwo:"2 39634  98.1819 132.0838 0001369  78.7198 281.4156 14.59198520217480",hasModel:!0,filePath:"./satellites/sentinel1/s1.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0,launchDate:new Date("2014-04-03T21:02:00.000Z")},{key:"s2a",name:"SENTINEL-2A",shortName:"S-2A",satIndex:1,swathTypes:["red","purple","white","darkGrey","green","greener"],swathColors:[te.colorFromKmlHex("ff0000ff"),te.colorFromKmlHex("ffff00ff"),te.colorFromKmlHex("ffffffff"),te.colorFromKmlHex("ff7f7f7f"),te.colorFromKmlHex("ff00ff00"),te.colorFromKmlHex("ff00fff7")],swatModes:["NOBS"],tleLineOne:"1 40697U 15028A   18124.08865983  .00000004  00000-0  17994-4 0  9993",tleLineTwo:"2 40697  98.5686 199.4434 0001286  92.5669 267.5666 14.30817033149583",hasModel:!0,filePath:"./satellites/senti2version6/s2.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:1e6,translations:{x:.1,y:.385,z:.02},ignoreLocalTransforms:!0,launchDate:new Date("2015-06-23T01:52:00.000Z")},{key:"s3a",name:"SENTINEL-3A",shortName:"S-3A",satIndex:2,tleLineOne:"1 41335U 16011A   18124.14356592 -.00000000  00000-0  18017-4 0  9998",tleLineTwo:"2 41335  98.6266 192.0005 0001035 100.1921 259.9376 14.26736754115121",hasModel:!0,filePath:"./satellites/Sentinel3/s3.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:180,headingMultiply:1},preRotations:{x:0,y:180,z:0},scale:1e6,translations:{x:.01,y:1.98,z:.07},ignoreLocalTransforms:!0,launchDate:new Date("2016-02-16T17:57:00.000Z")},{key:"s1b",name:"SENTINEL-1B",shortName:"S-1B",satIndex:3,swathTypes:["black","red","green","white"],swathColors:[te.colorFromKmlHex("ff000000"),te.colorFromKmlHex("ff0000ff"),te.colorFromKmlHex("ff00ff00"),te.colorFromKmlHex("ffffffff")],swatModes:["IW","EW","SM"],tleLineOne:"1 41456U 16025A   18124.13828432 -.00000022  00000-0  49756-5 0  9992",tleLineTwo:"2 41456  98.1817 132.0102 0001487  82.9964 277.1419 14.59197806107664",hasModel:!0,filePath:"./satellites/sentinel1/s1.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0,launchDate:new Date("2016-04-25T21:02:00.000Z")},{key:"s2b",name:"SENTINEL-2B",shortName:"S-2B",satIndex:4,swathTypes:["blue"],swathColors:[te.colorFromKmlHex("ffffff00")],swatModes:["NOBS"],tleLineOne:"1 42063U 17013A   18124.12358125  .00000002  00000-0  17497-4 0  9994",tleLineTwo:"2 42063  98.5687 199.4702 0001382  97.5073 262.6270 14.30817718 60503",groundPosition:{latitude:5.2079,longitude:-52.7724,altitude:0},hasModel:!0,filePath:"./satellites/senti2version6/s2.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:1e6,translations:{x:.1,y:.385,z:.02},ignoreLocalTransforms:!0,launchDate:new Date("2017-03-07T01:49:00.000Z")},{key:"s5p",name:"SENTINEL-5P",shortName:"S-5P",satIndex:5,swathTypes:[],swathColors:[],tleLineOne:"1 42969U 17064A   18123.85141871 -.00000009  00000-0  16636-4 0  9994",tleLineTwo:"2 42969  98.7352  64.1585 0001101  78.1817 281.9482 14.19565315 28712",groundPosition:{latitude:62.92786,longitude:40.57483,altitude:0},hasModel:!0,filePath:"./satellites/sentinel5p/s5p.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:210,y:0,z:0},scale:7e4,translations:{x:.5,y:.4,z:-1.2},ignoreLocalTransforms:!0,launchDate:new Date("2017-10-13T09:27:00.000Z")},{key:"s3b",name:"SENTINEL-3B",shortName:"S-3B",satIndex:6,tleLineOne:"1 43437U 18039A   18122.61596633  .00002473  00000-0  10753-2 0  9999",tleLineTwo:"2 43437  98.6226 190.4610 0008811 292.4467  67.5830 14.24954518   977",groundPosition:{latitude:62.925556,longitude:40.577778,altitude:0},hasModel:!0,filePath:"satellites/Sentinel3/s3.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:180,headingMultiply:1},preRotations:{x:0,y:180,z:0},scale:1e6,translations:{x:.01,y:1.98,z:.07},ignoreLocalTransforms:!0,launchDate:new Date("2018-04-25T17:57:00.000Z")}],ne=ae,re=m.a.RenderableLayer,ie=m.a.Position,oe=U.a.EoUtils,se={rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0},le=function(e){Object(_.a)(a,e);var t=Object(v.a)(a);function a(e,n){var r;return Object(p.a)(this,a),(r=t.call(this,e)).type="SatelliteModelLayer",r._satelliteOptions=n,r._rerenderMap=null,r.key=e.key,r.model=null,r.time=e.time,r.Tle=null,r.heading=null,r.onLayerChanged=e.onLayerChanged||null,r}return Object(b.a)(a,[{key:"setModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se,a=arguments.length>2?arguments[2]:void 0;e&&(this.model=new q(e,t,a),this.removeAllRenderables(),this.addRenderable(this.model),this.doRerender())}},{key:"setPosition",value:function(e){e&&this.model&&this.model.position(e)}},{key:"setTle",value:function(e){e&&(this.Tle=e,this.update())}},{key:"update",value:function(){if(this.Tle&&this.time){var e=oe.computeSatrec.apply(oe,Object(f.a)(this.Tle)),t=oe.getOrbitPosition(e,new Date(this.time));this.setPosition(new ie(t.latitude,t.longitude,t.altitude)),this.model&&this.alignWithOrbit(this.time,t,oe.computeSatrec.apply(oe,Object(f.a)(this.Tle)),this._satelliteOptions.rotations,this.model._model),this.doRerender()}}},{key:"alignWithOrbit",value:function(e,t,a,n,r){var i=e.getTime(),o=oe.getOrbitPosition(a,new Date(i+1e4)),s=oe.headingAngleRadians(t.latitude,t.longitude,o.latitude,o.longitude),l=oe.rad2deg(s);this.heading=l,"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key,type:this.type},{update:{heading:this.heading}});var c=(l+n.headingAdd)*n.headingMultiply;0!==l&&(1===n.headingAxis[0]?r.xRotation=c:1===n.headingAxis[1]?r.yRotation=c:1===n.headingAxis[2]&&(r.zRotation=c))}},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),a}(re),ce=(m.a.Position,U.a.EoUtils),ue=[],he=function(e){console.log(ne[e].name);var t={rotations:ne[e].rotations,preRotations:ne[e].preRotations,scale:ne[e].scale,translations:ne[e].translations,ignoreLocalTransforms:ne[e].ignoreLocalTransforms},a=new le({key:ne[e].key,time:new Date},t),n=ce.computeSatrec(ne[e].tleLineOne,ne[e].tleLineTwo),r=ce.getOrbitPosition(n,new Date);fetch(ne[e].filePath).then((function(e){return e.json()})).then((function(t){a.setModel(t,{rotations:ne[e].rotations,preRotations:ne[e].preRotations,scale:ne[e].scale,translations:ne[e].translations,ignoreLocalTransforms:ne[e].ignoreLocalTransforms},r)})),a.setTle([ne[e].tleLineOne,ne[e].tleLineTwo]),ue.push(a)},de=0;de<ne.length;de++)he(de);var fe=ue,ge=[{service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.esa.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018 esa",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.esa.maps.eox.at/wms",layerNames:"osm",title:"osm",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.esa.maps.eox.at/wms",layerNames:"terrain-light",title:"terrain-light",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.maps.eox.at/wms",layerNames:"terrain",title:"terrain",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)}],me=[{service:"https://tiles.maps.eox.at/wms",layerNames:"hydrography",title:"hydrography",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},{service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",title:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)}];function pe(e){var t=e.id,a=e.clon,r=e.clat,i=e.alt,o=e.starfield,l=e.atmosphere,u=e.background,g=e.overlay,p=e.names,b=e.satellites,_=e.dem,v=Object(n.useRef)(null),y=Object(n.useState)("3D"),S=Object(s.a)(y,2),O=(S[0],S[1]),x=Object(n.useState)(""),M=Object(s.a)(x,2),E=(M[0],M[1],Object(n.useState)([])),j=Object(s.a)(E,2),R=j[0],T=j[1],A=Object(n.useState)([]),w=Object(s.a)(A,2),C=(w[0],w[1],Object(n.useState)({latitude:r,longitude:a,altitude:i,aoi:"",pickedItems:[]})),L=Object(s.a)(C,2),D=L[0],P=L[1],N=Object(n.useRef)(_),F=Object(n.useRef)(0),I=Object(n.useRef)(0);Object(n.useRef)(0),Object(n.useRef)(0);function U(){var e=v.current,t=e.navigator.heading/-20;setTimeout((function a(){Math.abs(e.navigator.heading)>Math.abs(t)?(e.navigator.heading+=t,setTimeout(a,10)):e.navigator.heading=0,e.redraw()}),10)}function V(e){console.log("toggleAtmosphere: "+e),W("Atmosphere").enabled=null!=e?e:!W("Atmosphere").enabled,v.current.redraw()}function B(e){console.log("toggleModel: "+e),W("Model").enabled=null!=e?e:!W("Model").enabled,v.current.redraw()}function G(e){console.log("toggleStarfield: "+e),W("StarField").enabled=null!=e?e:!W("StarField").enabled,v.current.redraw()}function z(e){console.log("toggleNames: "+e),W("overlay_bright").enabled=null!=e?e:!W("overlay_bright").enabled,v.current.redraw()}function K(e){v.current.layers[F.current].enabled=!1,F.current=null===e?F.current+1:(e-1)%ge.length,console.log("Background Layer ["+(F.current+1)+"/"+ge.length+"]: "+v.current.layers[F.current].displayName),v.current.layers[F.current].enabled=!0,v.current.redraw()}function H(e){console.log(e),v.current.layers[I.current+ge.length].enabled=!1,I.current=null===e?I.current+1:(e-1)%me.length,console.log(I.current),v.current.layers[I.current+ge.length].enabled=!0,v.current.redraw()}function Y(e){var t;console.log("Copernicus Dem: "+e),N.current?(console.log("Switching to NASA Dem"),t=new m.a.EarthElevationModel):(console.log("Switching to Copernicus Dem"),(t=new m.a.ElevationModel).addCoverage(new m.a.TiledElevationCoverage({coverageSector:m.a.Sector.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"image/tiff",minElevation:-11e3,maxElevation:8850,urlBuilder:new m.a.WcsTileUrlBuilder("https://dem.esa.maps.eox.at/elevation","copdem","2.0.1")}))),v.current.globe.elevationModel=t,v.current.redraw(),N.current=!N.current}function W(e){for(var t=0;t<v.current.layers.length;t++)if(v.current.layers[t].displayName===e)return v.current.layers[t];return null}function Z(e){return X.apply(this,arguments)}function X(){return(X=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,a){setTimeout((function(){v.current.goToAnimator.travelTime=1e3,v.current.goTo(new m.a.Position(e,t,a)),v.current.redraw()}),2e3)}var q=function(){var e=v.current.navigator.lookAtLocation.longitude,t=v.current.navigator.lookAtLocation.latitude,a=v.current.navigator.range,n=a<2e6?function(){var e,t,a=v.current.viewport,n="";try{(e=v.current.pickTerrain(v.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=v.current.pickTerrain(v.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}():"";P((function(r){return Object(c.a)(Object(c.a)({},r),{},{longitude:e,latitude:t,altitude:a,viewpolygon:n})}))},Q=function(e){console.log("double click"),U()};return Object(n.useEffect)((function(){console.log("Creating the world...");var e=new m.a.ElevationModel;e.removeAllCoverages(),e.addCoverage(new m.a.TiledElevationCoverage({coverageSector:m.a.Sector.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"image/tiff",minElevation:-11e3,maxElevation:8850,urlBuilder:new m.a.WcsTileUrlBuilder("https://dem.esa.maps.eox.at/elevation","copdem","2.0.1")})),v.current=new m.a.WorldWindow(t),v.current.redrawCallbacks.push(q),m.a.BasicWorldWindowController.prototype.applyLimits=function(){v.current.navigator.range=m.a.WWMath.clamp(v.current.navigator.range,2e3,3e8)};var n=new m.a.ClickRecognizer(v.current,Q);n.numberOfClicks=2,n.maxClickInterval=200,v.current.worldWindowController.clickDownRecognizer.recognizeSimultaneouslyWith(n);var s=new m.a.TapRecognizer(v.current,Q);s.numberOfTaps=2,s.name="double tap",v.current.worldWindowController.tapDownRecognizer.recognizeSimultaneouslyWith(s),m.a.configuration.baseUrl=window.location.href;var c=new k,u=new m.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),h=new m.a.RenderableLayer("Quicklooks");console.log(fe);for(var d=[{layer:c,enabled:o},{layer:u,enabled:l},{layer:h,enabled:!0},{layer:ee,enabled:b}],f=0;f<ge.length;f++){var g=new m.a.WmsLayer(ge[f],"");g.enabled=!1,v.current.addLayer(g,"")}for(var p=0;p<me.length;p++){var _=new m.a.WmsLayer(me[p],"");_.enabled=!1,v.current.addLayer(_,"")}for(var y=0;y<d.length;y++)d[y].layer.enabled=d[y].enabled,v.current.addLayer(d[y].layer);for(var S=0;S<fe.length;S++)fe.enabled=b,v.current.addLayer(fe[S]);console.log(v.current.layers),c.time=new Date,u.time=new Date,J(r,a,i),v.current.redraw(),v.current.deepPicking=!0}),[]),Object(n.useEffect)((function(){K(u)}),[u]),Object(n.useEffect)((function(){H(g)}),[g]),Object(n.useEffect)((function(){z(p)}),[p]),Object(n.useEffect)((function(){V(l)}),[l]),Object(n.useEffect)((function(){G(o)}),[o]),Object(n.useEffect)((function(){B(b)}),[b]),Object(n.useEffect)((function(){Y(_)}),[_]),{ewwstate:D,moveTo:J,removeGeojson:function(){for(var e=0;e<R.length;e++)v.current.removeLayer(R[e]);T((function(e){return[]})),v.current.redraw()},addGeojson:function(e,t){var a=new m.a.RenderableLayer("Products: "+e.properties.updated+Math.ceil(1e4*Math.random()));v.current.addLayer(a),new m.a.GeoJSONParser(e).load((function(){console.log(a),T((function(e){return[].concat(Object(f.a)(e),[a])})),Z(t),v.current.redraw()}),(function(e,t){var a={};a.userProperties=t;var n=new m.a.PlacemarkAttributes(null);return n.imageScale=10,n.imageColor=new m.a.Color(0,1,1,.2),n.labelAttributes.offset=new m.a.Offset(m.a.OFFSET_FRACTION,5,m.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new m.a.PlacemarkAttributes(n):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new m.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new m.a.ShapeAttributes(null),a.attributes.interiorColor=new m.a.Color(1,0,0,.2),a.attributes.outlineColor=new m.a.Color(1,0,0,.3),a.highlightAttributes=new m.a.ShapeAttributes(a.attributes),a.highlightAttributes.outlineColor=new m.a.Color(1,0,0,.4),a.highlightAttributes.interiorColor=new m.a.Color(1,0,0,0)),a}),a)},addWMS:function(){},toggleStarfield:G,toggleAtmosphere:V,setTime:function(e){W("StarField").time=W("Atmosphere").time=new Date(e),Z(e);for(var t=0;t<fe.length;t++)fe[t].setTime(new Date(e));v.current.redraw()},toggleProjection:function(){O((function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":v.current.globe.projection=new m.a.ProjectionWgs84;break;case"Equirectangular":v.current.globe.projection=new m.a.ProjectionEquirectangular;break;case"Mercator":v.current.globe.projection=new m.a.ProjectionMercator;break;case"North Polar":v.current.globe.projection=new m.a.ProjectionPolarEquidistant("North");break;case"South Polar":v.current.globe.projection=new m.a.ProjectionPolarEquidistant("South");break;default:v.current.globe.projection=new m.a.ProjectionWgs84}return v.current.redraw(),t[a]}))},toggleNames:z,toggleModel:B,toggleBg:K,toggleOv:H,toggleDem:Y,northUp:U}}var be=a(8),_e=a(4);var ve=function(e){var t=e.id,a=e.alt,n=Object(l.useGlobal)("mapSettings"),r=Object(s.a)(n,2),i=r[0],o=r[1],u=Object(l.useGlobal)("position"),h=Object(s.a)(u,2),d=h[0],f=(h[1],Object(l.useGlobal)("viewDate")),g=Object(s.a)(f,2),m=g[0],p=(g[1],Object(l.useGlobal)("satellites")),b=Object(s.a)(p,2),_=b[0],v=b[1],y=Object(l.useState)(i),S=Object(s.a)(y,2),O=S[0],x=S[1],M=Object(l.useState)(_),E=Object(s.a)(M,2),j=E[0],R=E[1],T=pe({id:t,clat:d.clat,clon:d.clon,alt:a,starfield:i.starfield,atmosphere:i.atmosphere,background:i.background,overlay:i.overlay,satellites:_,names:i.names,dem:i.dem}),A=(T.ewwstate,T.moveTo,T.addGeojson,T.removeGeojson),w=(T.addWMS,T.toggleProjection),C=(T.toggleOv,T.toggleModel,T.setTime),L=(T.toggleDem,T.northUp);return Object(be.a)("p",w),Object(be.a)("c",A),Object(be.a)("u",L),Object(be.a)("b",(function(){return x((function(e){return Object(c.a)(Object(c.a)({},e),{},{background:e.background+1})}))})),Object(be.a)("m",(function(){return R((function(e){return!e}))})),Object(be.a)("d",(function(){return x((function(e){return Object(c.a)(Object(c.a)({},e),{},{dem:!e.dem})}))})),Object(be.a)("o",(function(){return x((function(e){return Object(c.a)(Object(c.a)({},e),{},{overlay:e.overlay+1})}))})),Object(be.a)("a",(function(){return x((function(e){return Object(c.a)(Object(c.a)({},e),{},{atmosphere:!e.atmosphere})}))})),Object(be.a)("s",(function(){return x((function(e){return Object(c.a)(Object(c.a)({},e),{},{starfield:!e.starfield})}))})),Object(be.a)("n",(function(){return x((function(e){return Object(c.a)(Object(c.a)({},e),{},{names:!e.names})}))})),Object(l.useEffect)((function(){C(m.getTime())}),[m]),Object(l.useEffect)((function(){o(O)}),[O]),Object(l.useEffect)((function(){x(i)}),[i]),Object(l.useEffect)((function(){v(j)}),[j]),Object(l.useEffect)((function(){R(_)}),[_]),Object(_e.jsx)("canvas",{id:t,style:{background:"black",position:"fixed",left:0,width:"100%",height:"100%"}})},ye=a(29),Se=a.n(ye);a(140);var Oe=function(e){var t=e.date,a=e.highlight;return e.animated,Object(_e.jsxs)("div",{className:"LabelContainer",children:[Object(_e.jsx)("hi",{className:"year"===a?"Highlighted":"",children:t.getUTCFullYear()}),"-",Object(_e.jsx)("hi",{className:"month"===a?"Highlighted":"",children:Se()(t,"UTC:mmm").toUpperCase()}),"-",Object(_e.jsx)("hi",{className:"day"===a?"Highlighted":"",children:Se()(t,"UTC:dd")}),"\xa0/\xa0",Object(_e.jsx)("hi",{className:"hour"===a?"Highlighted":"",children:Se()(t,"UTC:HH")}),":",Object(_e.jsx)("hi",{className:"minute"===a?"Highlighted":"",children:Se()(t,"UTC:MM")}),":",Object(_e.jsx)("hi",{className:"second"===a?"Highlighted":"",children:Se()(t,"UTC:ss")})]})};function xe(e){var t=e.autoStart,a=e.initdate,r=Object(n.useState)(a),i=Object(s.a)(r,2),o=i[0],l=i[1],c=Object(n.useRef)(),u=Object(n.useRef)(),h=Object(n.useRef)();h.current=200;var d=Object(n.useRef)(),f=Object(n.useRef)(),g=Object(n.useRef)();function m(){console.log("start clock"),u.current||(u.current=h.current),c.current||(f.current=setInterval((function(){d.current+=u.current,l(new Date(d.current))}),h.current)),c.current=!0}return Object(n.useEffect)((function(){console.log("init start useclock "+a.toJSON()),d.current=a.getTime()}),[a]),Object(n.useEffect)((function(){console.log("render useclock"),d.current=(new Date).getTime(),t&&m()}),[t]),{date:o,playing:c,togglePause:function(){c.current?function(){console.log("stop clock"),g.current&&clearTimeout(g.current);f.current&&clearInterval(f.current);c.current=!1}():m()},reset:function(){d.current=(new Date).getTime(),l(new Date(d.current))},increaseSpeed:function(){u.current=u.current>0?u.current*=2:u.current/=2,Math.abs(u.current)<h.current&&(u.current=h.current),console.log("step: "+u.current)},decreaseSpeed:function(){u.current=u.current>0?u.current/=2:u.current*=2,Math.abs(u.current)<h.current&&(u.current=-1*h.current),console.log("step: "+u.current)},forceDate:function(e){console.log("forcedate useclock: "+e.toJSON()),d.current=e.getTime()}}}a(141);var Me=function(e){var t=e.startdate,a=e.onDateChange,r=xe({autoStart:!1,initdate:t}),i=r.date,o=r.togglePause,l=r.reset,c=r.increaseSpeed,u=r.decreaseSpeed;Object(be.a)("t",o),Object(be.a)("r",(function(){l()})),Object(be.a)(".",c),Object(be.a)(",",u),Object(n.useEffect)((function(){a(i)}),[i]);var h=Object(n.useState)(),d=Object(s.a)(h,2),f=d[0],g=d[1];return Object(_e.jsx)("div",{className:"DateController",onClick:function(){var e=Date.now();f&&e-f<400?l():(g(e),o())}})},Ee=a(15),je=a(45),Re=a(108);a(79);var Te=function(e){var t=e.date,a=e.zoomfactor,r=Object(n.useRef)(),i=Object(n.useState)(1),o=Object(s.a)(i,2),l=o[0],c=(o[1],Object(n.useState)(!1)),u=Object(s.a)(c,2),h=(u[0],u[1],Object(n.useState)("")),d=Object(s.a)(h,2),f=d[0],g=d[1];return Object(n.useEffect)((function(){return function(){}})),Object(n.useLayoutEffect)((function(){g(function(e,t){if(r.current){for(var a,n,i,o,s=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],c=0,u=0,h=0,d=0,f=0,g=0,m=[],p=0;p<r.current.offsetHeight;p+=1){var b=new Date((p-r.current.offsetHeight/2)*t+e.getTime());switch(a=b.getUTCDate(),n=b.getUTCMonth(),i=b.getUTCHours(),o=b.getUTCFullYear(),c=b.getUTCMinutes(),!0){case t<2e3:c!==g&&(0!==c||0!==i?m.push({class:"HourTic",pos:p,label:_(i,2)+":"+_(c,2)}):0===c&&0===i&&(m.push({class:"DayTic_h",pos:p,label:_(a,2)}),m.push({class:"MonthTic_h2",pos:p,label:s[n]})));break;case t<4e4:c!==g&&(0===c&&0==i||c%10!==0?0===c&&0===i&&(m.push({class:"DayTic_h",pos:p,label:_(a,2)}),m.push({class:"MonthTic_h2",pos:p,label:s[n]})):m.push({class:"HourTic",pos:p,label:_(i,2)+":"+_(c,2)}));break;case t<18e4:i!==f&&(0!==i?m.push({class:"HourTic",pos:p,label:_(i,2)+":00"}):(m.push({class:"DayTic_h",pos:p,label:_(a,2)}),m.push({class:"MonthTic_h2",pos:p,label:s[n]})));break;case t<42e4:i!==f&&(0!==i&&i%3===0?m.push({class:"HourTic",pos:p,label:_(i,2)+":00"}):0===i&&(m.push({class:"DayTic_h",pos:p,label:_(a,2)}),m.push({class:"MonthTic_h2",pos:p,label:s[n]})));break;case t<42e5:a!==u&&(1!==a?m.push({class:"DayTic",pos:p,label:a}):(m.push({class:"MonthTic_h",pos:p,label:s[n]}),0===n&&m.push({class:"YearTic_h2",pos:p,label:o})));break;case t<288e5:a!==u&&(1!==a&&30!==a&&a%5===0?m.push({class:"DayTic",pos:p,label:a}):1==a&&(m.push({class:"MonthTic_h",pos:p,label:s[n]}),0===n&&m.push({class:"YearTic_h2",pos:p,label:o})));break;case t<1728e5:n!==h&&(0!==n?m.push({class:"MonthTic",pos:p,label:s[n]}):(m.push({class:"MonthTic_h",pos:p,label:s[n]}),m.push({class:"YearTic_h2",pos:p,label:o})));break;case t<3456e5:n!==h&&(0!==n&&11!==n&&n%3===0?m.push({class:"MonthTic",pos:p,label:s[n]}):0==n&&(m.push({class:"MonthTic_h",pos:p,label:s[n]}),m.push({class:"YearTic_h2",pos:p,label:o})));break;case t<7776e6:o!==d&&(0!==n?m.push({class:"MonthTic",pos:p,label:s[n]}):m.push({class:"YearTic",pos:p,label:o}))}u=a,d=o,h=n,f=i,g=c}return m.map((function(e){return Object(_e.jsx)(Ee.a.div,{className:e.class,style:{top:e.pos,opacity:l},children:e.label},e.class+e.pos)}))}function _(e,t){for(var a=""+e;a.length<t;)a="0"+a;return a}}(t,a))}),[a,t]),Object(_e.jsx)(Ee.a.div,{ref:r,className:"DateSelectorScale",children:f})};var Ae=function(e){var t=e.startdate,a=e.onDateChange,r=e.onFinalDateChange,i=e.onStepChange,o=1296e6,l=36e5,u=Object(n.useRef)(),h=Object(n.useRef)(),d=Object(n.useRef)();h.current||(h.current=l),d.current||(d.current=0);var f=Object(n.useState)(t),g=Object(s.a)(f,2),m=g[0],p=g[1],b=Object(n.useState)(t),_=Object(s.a)(b,2),v=_[0],y=_[1],S=Object(n.useState)(!1),O=Object(s.a)(S,2),x=O[0],M=O[1],E=Object(n.useState)([6e4]),j=Object(s.a)(E,2),R=j[0],T=j[1],A=Object(n.useState)("hour"),w=Object(s.a)(A,2),C=w[0],L=w[1],D=Object(n.useState)(l),P=Object(s.a)(D,2),N=P[0],F=P[1];h.current||(h.current=l);var k=Object(n.useRef)(),I=Object(n.useRef)(),U=(Object(n.useRef)(),function(){var e=Date.now();k.current&&e-k.current<300&&!x?I.current=!0:(k.current=e,I.current=!1)}),V=Object(Ee.b)((function(){return{posxy_drag:[0,0]}})),B=Object(s.a)(V,2),G=B[0].posxy_drag,z=B[1],K=Object(Ee.b)((function(){return{xy2:[0,0]}})),H=Object(s.a)(K,2),Y=H[0].xy2,W=H[1],Z=Object(Ee.b)((function(){return{posy_wheel:0}})),X=Object(s.a)(Z,2),J=X[0].posy_wheel,q=X[1],Q=Object(je.a)({onDragEnd:function(){h.current=N},onWheel:function(e){e.delta;var t=e.first,n=e.down,i=(e.direction,e.velocity,e.xy,e.movement),o=e.memo,s=void 0===o?J.getValue():o;return q({posy_wheel:i[1]/2+d.current,immediate:!0,config:{},onFrame:function(){if(!t){var e=new Date(v.getTime()+Math.ceil(i[1]*N/R[0])*R[0]);p(e),a(e)}d.current=J.getValue()},onRest:function(){if(!n){M(!1);var e=new Date(v.getTime()+Math.ceil(J.getValue()*N/R[0])*R[0]);r(e),y(e),d.current=0}}}),s},onDrag:function(e){e.event;var t,n=e.active,i=e.first,s=e.down,l=(e.touches,e.delta),c=e.velocity,u=e.direction,h=e.shiftKey,f=(e.xy,e.movement),g=e.temp,b=void 0===g?{lastzoom:N,lastdelta:[0,0],currentzoom:N}:g;return i&&(M(!0),U(),y(m),d.current=0),I.current||h?((t=b.currentzoom+b.currentzoom/50*l[1]*-1)<1e3&&(t=1e3),t>o&&(t=o),F(t),b.currentzoom=t,b.lastdelta=l,s||M(!1),b):(c=Math.abs(c)<.2?0:c,z({posxy_drag:f,immediate:n,config:{velocity:Object(Re.scale)(u,c),decay:!0},onFrame:function(){if(!i){var e;if("month"===C){var t=Math.ceil(G.getValue()[1]*N/R[0]);(e=new Date(v.getTime())).setUTCMonth(v.getUTCMonth()-t)}else e=new Date(v.getTime()-Math.ceil(G.getValue()[1]*N/R[0])*R[0]);p(e),a(e)}},onRest:function(){if(!s){M(!1);var e="month"===C?R[m.getUTCMonth()]:R[0],t=new Date(v.getTime()-Math.ceil(G.getValue()[1]*N/e)*e);r(t),y(t)}}}),b)}},{reset:!0,drag:{useTouch:!0}});return Object(n.useEffect)((function(){x||function(e){if(!x){var t=[0,(v.getTime()-e.getTime())/N];W({xy2:t,immediate:!1,config:{reset:!0,config:{duration:200}},onFrame:function(){var e=new Date(v.getTime()-Y.getValue()[1]*N);p(e),a(e)},onRest:function(){var e=new Date(v.getTime()-Y.getValue()[1]*N);Y.setValue([0,0]),p(e),y(e)}})}}(t)}),[t]),Object(n.useEffect)((function(){console.log("Selector active: "+x)}),[x]),Object(n.useEffect)((function(){i(C)}),[C]),Object(n.useEffect)((function(){switch(!0){case N>120426316:T([26784e5,24192e5,26784e5,2592e6,26784e5,2592e6,26784e5,26784e5,2592e6,26784e5,2592e6,26784e5]),L("month");break;case N>14544702:T([864e5]),L("day");break;case N>735259:T([36e5]),L("hour");break;case N>32274:T([6e4]),L("minute");break;default:T([1e3]),L("second")}}),[N]),Object(_e.jsx)(Ee.a.div,{className:"DateSelector",ref:u,children:Object(_e.jsxs)("div",{className:"Mask",children:[Object(_e.jsx)("div",Object(c.a)(Object(c.a)({},Q()),{},{className:"touchMask",children:" "})),Object(_e.jsx)(Te,{className:"scale",date:m,zoomfactor:N}),Object(_e.jsx)("div",{className:"TriangleContainer",children:Object(_e.jsx)("svg",{height:"40",width:"20",className:"Triangle",children:Object(_e.jsx)("polygon",{points:"20,5 20,35 12,20"})})})]})})};var we=function(e){var t=e.onDateChange,a=e.onFinalDateChange,r=e.animated,i=new Date,o=Object(n.useState)(i),l=Object(s.a)(o,2),c=l[0],u=l[1],h=Object(n.useState)(i),d=Object(s.a)(h,2),f=d[0],g=d[1],m=Object(n.useState)(i),p=Object(s.a)(m,2),b=p[0],_=p[1],v=Object(n.useState)(1),y=Object(s.a)(v,2),S=y[0],O=y[1];return Object(_e.jsxs)("div",{children:[Object(_e.jsx)(Me,{startdate:f,onDateChange:function(e){u(e)}}),Object(_e.jsx)(Oe,{date:b,animated:r,highlight:S}),Object(_e.jsx)(Ae,{startdate:c,onDateChange:function(e){_(e),t(e)},onFinalDateChange:function(e){g(e),a(e)},onStepChange:function(e){console.log("handleSelectorStepChange"+e),O(e)}})]})},Ce=(a(142),a(109)),Le=a(110);var De=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],i=a[1],o=Object(Ee.b)((function(){return{mr:-300}})),l=Object(s.a)(o,2),u=l[0].mr,h=l[1],d=Object(je.a)({onDrag:function(e){var t=e.down,a=e.delta;e.vxvy[0]>1||!t&&a[0]>100?(h({mr:-300}),i(!0)):(h({mr:t?-Math.max(a[0],0):0}),i(!1))}});return Object(_e.jsxs)(Ee.a.div,Object(c.a)(Object(c.a)({},d()),{},{style:{right:u,top:0},className:"ControlPanel",children:[Object(_e.jsx)("div",{className:"PanelControl shadow",onClick:function(){return h(r?{mr:0}:{mr:-300})},children:Object(_e.jsx)(Ce.Icon,{icon:Le.a,width:"100%"})}),e.children]}))};a(143);var Pe=function(e){var t=e.initialmission,a=e.onMissionChange,r=Object(n.useState)(t),i=Object(s.a)(r,2),o=i[0],l=i[1];return Object(be.a)("1",(function(){l("S1")})),Object(be.a)("2",(function(){l("S2")})),Object(be.a)("3",(function(){l("S3")})),Object(be.a)("5",(function(){l("S5P")})),Object(be.a)("6",(function(){l("ENVISAT")})),Object(n.useEffect)((function(){console.log("Mission changed to: "+o),a(o)}),[o]),Object(_e.jsxs)("div",{className:"MissionSelector",children:[Object(_e.jsx)("div",{className:"S1"==o?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MissionIcon",src:"./images/s1_black.png",alt:"",onClick:function(){return l("S1")}})}),Object(_e.jsx)("div",{className:"S2"==o?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MissionIcon",src:"./images/s2_black.png",alt:"",onClick:function(){return l("S2")}})}),Object(_e.jsx)("div",{className:"S3"==o?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MissionIcon",src:"./images/s3_black.png",alt:"",onClick:function(){return l("S3")}})}),Object(_e.jsx)("div",{className:"S5P"==o?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MissionIcon",src:"./images/s5p_black.png",alt:"",onClick:function(){return l("S5P")}})})]})};var Ne=function(){var e=Object(l.useGlobal)("mission"),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(_e.jsx)(Pe,{initialmission:a,onMissionChange:n})};a(144);var Fe=function(e){var t=e.mapSettings,a=e.onMapSettingsChange,r=Object(n.useState)(t),i=Object(s.a)(r,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){a(o)}),[o]),Object(n.useEffect)((function(){l(t)}),[t]),Object(_e.jsxs)("div",{className:"MapSelector",children:[Object(_e.jsx)("div",{className:t.atmosphere?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/atmosphere.png",alt:"",onClick:function(){return l((function(e){return Object(c.a)(Object(c.a)({},e),{},{atmosphere:!e.atmosphere})}))}})}),Object(_e.jsx)("div",{className:t.starfield?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/starfield.png",alt:"",onClick:function(){return l((function(e){return Object(c.a)(Object(c.a)({},e),{},{starfield:!e.starfield})}))}})}),Object(_e.jsx)("div",{className:t.names?"CircleButtonSelected":"CircleButton",children:Object(_e.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return l((function(e){return Object(c.a)(Object(c.a)({},e),{},{names:!e.names})}))}})}),Object(_e.jsx)("div",{className:"CircleButton",children:Object(_e.jsx)("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return l((function(e){return Object(c.a)(Object(c.a)({},e),{},{background:e.background+1})}))}})})]})};var ke=function(){var e=Object(l.useGlobal)("mapSettings"),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(_e.jsx)(Fe,{mapSettings:a,onMapSettingsChange:n})},Ie=a(115);a(253);var Ue=function(){var e=Object(l.useGlobal)("appColor"),t=Object(s.a)(e,2),a=t[0];return t[1],Object(_e.jsx)("div",{className:"ColorSelector",children:Object(_e.jsx)(Ie.a,{color:a,onChangeComplete:function(e){document.documentElement.style.setProperty("--color",e.hex)}})})},Ve=a(71);var Be=function(){var e=Object(l.useGlobal)("viewDate"),t=Object(s.a)(e,2),a=(t[0],t[1]);return Object(_e.jsx)(we,{onDateChange:a,onFinalDateChange:a})};var Ge=function(){var e=Object(Ve.b)(),t=Object(l.useGlobal)("mission"),a=Object(s.a)(t,1)[0],r=Object(l.useGlobal)("mapSettings"),i=Object(s.a)(r,1)[0],o=Object(l.useGlobal)("appColor"),c=(Object(s.a)(o,1)[0],Object(n.useState)(!1)),u=Object(s.a)(c,2),h=u[0];return u[1],Object(be.a)("f",e.enter),Object(n.useEffect)((function(){console.log("fullScreen changed to: "+h)}),[h]),Object(n.useEffect)((function(){console.log("time to init earth"),console.log(i)}),[]),Object(_e.jsx)("div",{className:"App",children:Object(_e.jsxs)(Ve.a,{handle:e,children:[Object(_e.jsx)("div",{className:"Earth",children:Object(_e.jsx)(ve,{id:"globe"})}),Object(_e.jsx)(Be,{}),Object(_e.jsxs)(De,{active:"true",children:[Object(_e.jsx)("div",{class:"logo",children:Object(_e.jsx)("img",{src:"./images/EOi_logo.png",height:"150"})}),Object(_e.jsx)(Ne,{}),Object(_e.jsx)(ke,{}),Object(_e.jsx)(Ue,{})]}),Object(_e.jsx)("div",{className:"MissionLabel",children:a})]})})},ze=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,256)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)}))};console.log("init global: "+(new Date).getTime()),Object(l.setGlobal)({mission:"S1",satellites:!1,appColor:"#222222",position:{clon:"0.5",clat:"40"},viewDate:new Date,mapSettings:{atmosphere:!0,starfield:!0,names:!1,background:1,overlay:2,dem:!0}}),o.a.render(Object(_e.jsx)(r.a.StrictMode,{children:Object(_e.jsx)(Ge,{})}),document.getElementById("root")),ze()},79:function(e,t,a){}},[[254,1,2]]]);
//# sourceMappingURL=main.a492c4fe.chunk.js.map